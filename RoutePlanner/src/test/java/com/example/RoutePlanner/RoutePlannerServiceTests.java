package com.example.RoutePlanner;

import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.google.maps.*;
import com.google.maps.errors.ApiException;
import com.google.maps.model.*;
import org.example.routeplanner.model.DrivingPath;
import org.example.routeplanner.model.Route;
import org.example.routeplanner.model.WalkingPath;
import org.example.routeplanner.service.RoutePlannerService;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.*;
import org.springframework.web.client.ResourceAccessException;
import java.lang.reflect.Field;

import java.io.IOException;
import java.lang.reflect.Field;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.ArgumentMatchers.eq;
import static org.mockito.Mockito.*;

public class RoutePlannerServiceTests {
    @Mock
    private NearbySearchRequest nearbySearchRequest;
    @Spy
    @InjectMocks
    private RoutePlannerService routePlannerService;

    private ObjectMapper objectMapper;

    @BeforeEach
    public void setup() {
        objectMapper = new ObjectMapper();
        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        MockitoAnnotations.openMocks(this);
    }

    @Test
    public void findRoutes_AreRoutesValid() throws Exception {
        // Arrange
        var placesApiMock = mockStatic(PlacesApi.class);

        String origin = "כפר סבא";
        String destination = "כיכר רבין, תל אביב";

        LatLng originLatLng = objectMapper.readValue("{\"lat\":32.178195,\"lng\":34.90761}", LatLng.class);
        LatLng destinationLatLng = objectMapper.readValue("{\"lat\":32.0804846,\"lng\":34.7806198}}", LatLng.class);

        doReturn(originLatLng).when(routePlannerService).getLocationFromAddress(eq(origin));
        doReturn(destinationLatLng).when(routePlannerService).getLocationFromAddress(eq(destination));

        PlacesSearchResponse placesSearchResponse = objectMapper.readValue("{\"results\":[{\"formattedAddress\":null,\"geometry\":{\"bounds\":null,\"location\":{\"lat\":32.0776703,\"lng\":34.7857861},\"locationType\":null,\"viewport\":{\"northeast\":{\"lat\":32.07908227989272,\"lng\":34.78710917989272},\"southwest\":{\"lat\":32.07638262010728,\"lng\":34.78440952010727}}},\"name\":\"Golda Parking Garage\",\"icon\":\"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/parking-71.png\",\"placeId\":\"ChIJq8gQ0JpLHRURtn54tq5dprc\",\"scope\":\"GOOGLE\",\"rating\":3.7,\"types\":[\"parking\",\"point_of_interest\",\"establishment\"],\"openingHours\":{\"openNow\":true,\"periods\":null,\"weekdayText\":null,\"permanentlyClosed\":null},\"photos\":[{\"photoReference\":\"AUc7tXX4P-m5MvKMEvAOy01GrsvFZ2fZqfjG5yBjjWYsDfhMARtcnvN3QedvjWLoh1X6Zkd246nrBkaua80bnX1MVkbgUcYWNIs8Vuw35J7ZFQoYCmfWwtvo9JC9UoBWmOl5k_RniuXD3F53Aljp7RYjC8srmGx3Wf1qOYTox7pPwkBIRm9b\",\"height\":3024,\"width\":4032,\"htmlAttributions\":[\"<a href=\\\"https://maps.google.com/maps/contrib/109325962305514141049\\\">A Google User</a>\"]}],\"vicinity\":\"Berkovitch St, Tel Aviv-Yafo\",\"permanentlyClosed\":false,\"userRatingsTotal\":148,\"businessStatus\":\"OPERATIONAL\"},{\"formattedAddress\":null,\"geometry\":{\"bounds\":null,\"location\":{\"lat\":32.0852196,\"lng\":34.7858085},\"locationType\":null,\"viewport\":{\"northeast\":{\"lat\":32.08677362989272,\"lng\":34.78722967989273},\"southwest\":{\"lat\":32.08407397010728,\"lng\":34.78453002010728}}},\"name\":\"חניון רמז ארלוזרוב\",\"icon\":\"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/parking-71.png\",\"placeId\":\"ChIJ20Q-vyhLHRUR4kHcVM3WjCg\",\"scope\":\"GOOGLE\",\"rating\":4.0,\"types\":[\"parking\",\"point_of_interest\",\"establishment\"],\"openingHours\":{\"openNow\":true,\"periods\":null,\"weekdayText\":null,\"permanentlyClosed\":null},\"photos\":null,\"vicinity\":\"Tel Aviv-Yafo\",\"permanentlyClosed\":false,\"userRatingsTotal\":14,\"businessStatus\":\"OPERATIONAL\"},{\"formattedAddress\":null,\"geometry\":{\"bounds\":null,\"location\":{\"lat\":32.0781463,\"lng\":34.7867703},\"locationType\":null,\"viewport\":{\"northeast\":{\"lat\":32.07946697989272,\"lng\":34.78813397989272},\"southwest\":{\"lat\":32.07676732010728,\"lng\":34.78543432010727}}},\"name\":\"אחוזות החוף גולדה\",\"icon\":\"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/generic_business-71.png\",\"placeId\":\"ChIJj8G3lJpLHRURQOv7h2QPK8c\",\"scope\":\"GOOGLE\",\"rating\":0.0,\"types\":[\"point_of_interest\",\"establishment\"],\"openingHours\":null,\"photos\":null,\"vicinity\":\"Berkovitch St 7, Tel Aviv-Yafo\",\"permanentlyClosed\":false,\"userRatingsTotal\":0,\"businessStatus\":\"OPERATIONAL\"},{\"formattedAddress\":null,\"geometry\":{\"bounds\":null,\"location\":{\"lat\":32.0740802,\"lng\":34.7838054},\"locationType\":null,\"viewport\":{\"northeast\":{\"lat\":32.07540232989271,\"lng\":34.78515752989272},\"southwest\":{\"lat\":32.07270267010727,\"lng\":34.78245787010728}}},\"name\":\"Dubnov Parking Lot\",\"icon\":\"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/parking-71.png\",\"placeId\":\"ChIJhYaKaINLHRURRMIT2a6LAHM\",\"scope\":\"GOOGLE\",\"rating\":3.8,\"types\":[\"parking\",\"point_of_interest\",\"establishment\"],\"openingHours\":null,\"photos\":[{\"photoReference\":\"AUc7tXXRjC2olokBlPL6v84SQLQfJel8CGmbGKp9sdrgW8VoeBis5oPKfEu3DuebpkZwsi_WmXknt7j74PAkl7fnvJo0es1_a0JpNqaafN7jB4A-g-N07BrYKgOFrJ1dTP-8q49mnI2gSfAkOpT9bPdb8z7jGfEuFoKaYYw33NpECBqbH6V6\",\"height\":3024,\"width\":4032,\"htmlAttributions\":[\"<a href=\\\"https://maps.google.com/maps/contrib/102215460242799418894\\\">Liran</a>\"]}],\"vicinity\":\"Dubnov St 4, Tel Aviv-Yafo\",\"permanentlyClosed\":false,\"userRatingsTotal\":187,\"businessStatus\":\"OPERATIONAL\"},{\"formattedAddress\":null,\"geometry\":{\"bounds\":null,\"location\":{\"lat\":32.0742408,\"lng\":34.7836511},\"locationType\":null,\"viewport\":{\"northeast\":{\"lat\":32.07559257989272,\"lng\":34.78503802989272},\"southwest\":{\"lat\":32.07289292010728,\"lng\":34.78233837010728}}},\"name\":\"אחוזות החוף דובנוב\",\"icon\":\"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/generic_business-71.png\",\"placeId\":\"ChIJBY70aoNLHRURb8xzWhm_YCA\",\"scope\":\"GOOGLE\",\"rating\":0.0,\"types\":[\"point_of_interest\",\"establishment\"],\"openingHours\":null,\"photos\":null,\"vicinity\":\"Dubnov St 4, Tel Aviv-Yafo\",\"permanentlyClosed\":false,\"userRatingsTotal\":0,\"businessStatus\":\"OPERATIONAL\"}],\"htmlAttributions\":[],\"nextPageToken\":null}", PlacesSearchResponse.class);
        placesApiMock.when(() -> PlacesApi.nearbySearchQuery(
                any(GeoApiContext.class),
                eq(destinationLatLng))
        ).thenReturn(nearbySearchRequest);
        when(nearbySearchRequest.radius(eq(500))).thenReturn(nearbySearchRequest);
        when(nearbySearchRequest.keyword(eq("אחוזות החוף"))).thenReturn(nearbySearchRequest);
        when(nearbySearchRequest.language(eq("he"))).thenReturn(nearbySearchRequest);
        when(nearbySearchRequest.await()).thenReturn(placesSearchResponse);

        PlacesSearchResult[] parkingLots = placesSearchResponse.results;
        DirectionsResult[] serializedDrivingDirectionsResults = objectMapper.readValue("[{\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJm_SUkxI5HRURI7g_eQaOawg\",\"types\":[\"ESTABLISHMENT\",\"POINT_OF_INTEREST\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJEw6XEJJLHRURKt2lRMd6y_w\",\"types\":[\"STREET_ADDRESS\"]}],\"routes\":[{\"summary\":\"כביש 531 ונתיבי איילון/כביש 20\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו <b>מערב</b> על <b>הכרמל</b> לכיוון <b>ארבל</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":417,\"humanReadable\":\"0.4 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":64,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"steps\":null,\"polyline\":{\"encodedPath\":\"azkcE_|`tEMz@]vBA?A?A?A??@A??@A??@?@?@A??@@??@?@?@@??@@??@@?[zBIf@ALADGh@Gh@Ej@AL?V?@Bf@Bj@@J@N@XIr@Eh@AHSp@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"בכיכר, צאו ביציאה ה<b>שלישית</b> אל <b>ברל כצנלסון</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":297,\"humanReadable\":\"0.3 km\"},\"maneuver\":\"roundabout-right\",\"duration\":{\"inSeconds\":63,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"endLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"steps\":null,\"polyline\":{\"encodedPath\":\"m~kcEqa`tEA?C@CBA??@A@?@?@?@A@?@@@?@?BBB@BB@D?B?BA@C~B^?BBD@@D@B@@A@?@??A@?@A?AhH|A\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>סוקולוב</b>\",\"distance\":{\"inMeters\":639,\"humanReadable\":\"0.6 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"endLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"steps\":null,\"polyline\":{\"encodedPath\":\"}okcEk|_tE\\\\DR@nBRR?f@HtBb@^JrAXfCf@d@HnB^vAZj@LXFVHHBlBd@NFHDPDZ@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> ליציאה אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":209,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":25,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"endLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"steps\":null,\"polyline\":{\"encodedPath\":\"amjcEmr_tEV^DJBFB`@UvAADK^[xAKb@SfA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנייה קלה <b>שמאלה</b> כדי להתמזג אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":4231,\"humanReadable\":\"4.2 km\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"endLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"steps\":null,\"polyline\":{\"encodedPath\":\"{njcEse_tE?BK~C[tAQ~@OfAg@tEUpB_@bDCVCPMvA[bDCTSbCGhAGfAIpCCzC@hENvHF|B@r@D`BBt@NbJ@L@h@?B@LHlDFrCB`C@|B@hB@R?h@@h@B~B?X?N?j@?tH?R?DADADKNArBAtA?b@?h@A^@~A?DBdA?FNxDT`EHjCBh@Bj@H|B?FFhE@j@@j@BjCAbA?BA~@C|@Ch@Cj@ATCRQfBSzAAHIf@Kh@o@nBs@`CYx@Q`@w@dBm@bAeA~AEFoKbNgApAW`@U^k@|@ABeAxB[v@GPu@rBg@fBWbA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"היצמדו ל<b>שמאל</b> כדי להישאר על <b>כביש 531</b>\",\"distance\":{\"inMeters\":2391,\"humanReadable\":\"2.4 km\"},\"maneuver\":\"keep-left\",\"duration\":{\"inSeconds\":83,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"endLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"steps\":null,\"polyline\":{\"encodedPath\":\"uwkcEs|vsE_ChJqArEMd@Of@Md@k@rBOf@WbAUl@IPGRABELoAlEq@`B_BxDs@zAm@bA_AnB}@|Aa@v@iBlC_BxBoB~BaBhBy@|@oE~E_@`@}BhC_AfAoDzDYZs@x@EBgBhBgChCc@b@sErE?@yCrC\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה מ<b>שמאל</b> אל <b>נתיבי איילון</b>/<wbr/><b>כביש 20</b>\",\"distance\":{\"inMeters\":12630,\"humanReadable\":\"12.6 km\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":521,\"humanReadable\":\"9 mins\"},\"startLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"endLocation\":{\"lat\":32.0925303,\"lng\":34.8007134},\"steps\":null,\"polyline\":{\"encodedPath\":\"ekncEocssESn@{BfCA@WX_DlDi@j@_AdA[^iAxAU^CBQ\\\\ABO^EJKXENKl@Ep@Cr@?j@?FBx@F|@Hr@FZDVDNDRFRBJJV@BN\\\\@@PZBDPVDFNPHHNNLHNLLHLFb@TLFTH\\\\J^Hb@FP@J@VBjCNdCNpD`@lGbA|ItAdDp@jCh@~@TXHbAXLDRF`@L`@ND@ZJjAd@VJ^N`Br@`@PbBt@hJ|DdDtAj@V^NJDTJTJ`@N^P^PbCbArMrFbC`ALFtAl@^N`Ab@nAh@xGpC^NfH~C^NhChAtAl@vIpDTJdBr@hCz@ZJ`Ct@f@L`@LxAb@l@N`@JrA^~D`AD?fDx@l@NTFb@JtAZNDb@LdBf@`@LfCt@`@LlDbA|DfAh@JZHzA^b@JzFtArFtAjEjApEtArSnFnCr@zItBnEhArEx@`CVvEXB?xCB`@?jEAjDCdDE|GIzDEtBEhE?J?p@AN?J?N@H?D@D@B@x^In@AxLUzJSjEB|FEhMM~BAjGCrJE~G@|DVtC`@zDbA~Ab@lB~@xJbGpAr@nBlA~CjBbFxCrLhH`DfB`DhBDBD@RJRHXL`@LxBl@nCd@H@ZFJDf@JNBNBPBPB^DVBX@z@LjS|C|C`@jLbB\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה לעבר <b>פנחס ספיר</b>\",\"distance\":{\"inMeters\":427,\"humanReadable\":\"0.4 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":33,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0925303,\"lng\":34.8007134},\"endLocation\":{\"lat\":32.0891697,\"lng\":34.7990064},\"steps\":null,\"polyline\":{\"encodedPath\":\"ia{bEm_lsEv@b@t@PJB`@Hb@FVDl@JdAPb@HdANl@N`@Hb@HNFRLFB@BHFRVHPBDFJFP?@BHFd@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו פנייה קלה <b>ימינה</b> כדי להתמזג אל <b>פנחס ספיר</b>\",\"distance\":{\"inMeters\":198,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":50,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0891697,\"lng\":34.7990064},\"endLocation\":{\"lat\":32.090575,\"lng\":34.798477},\"steps\":null,\"polyline\":{\"encodedPath\":\"ilzbEytksEKr@EPCJGLKTm@Nk@HI?q@A_@IKCm@U\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>גשר ההלכה</b>\",\"distance\":{\"inMeters\":329,\"humanReadable\":\"0.3 km\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":72,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.090575,\"lng\":34.798477},\"endLocation\":{\"lat\":32.091274,\"lng\":34.795347},\"steps\":null,\"polyline\":{\"encodedPath\":\"cuzbEoqksEYOITMd@YrAQhAGh@CREh@Eh@Eh@?@Ef@Ch@Er@?V?P?B?Z?H@N\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>פנקס</b>\",\"distance\":{\"inMeters\":828,\"humanReadable\":\"0.8 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":164,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.091274,\"lng\":34.795347},\"endLocation\":{\"lat\":32.09097,\"lng\":34.786569},\"steps\":null,\"polyline\":{\"encodedPath\":\"myzbE}}jsE?`@?h@?Z?R?h@Ah@?`@?H@lCBfBBnAFdB@h@JvBDn@@t@?H@H?LDfD@bA@rA?`@@P@`C@tA?H@lA@dB\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>רחוב דוד רמז</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":644,\"humanReadable\":\"0.6 km\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":157,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.09097,\"lng\":34.786569},\"endLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"steps\":null,\"polyline\":{\"encodedPath\":\"qwzbEagisEH?F?fA@hA?nCNjCNzBT`AHz@HRB~@FhAFrBNx@D^BjAHL@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":23240,\"humanReadable\":\"23.2 km\"},\"duration\":{\"inSeconds\":1550,\"humanReadable\":\"26 mins\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"startAddress\":\"0, כפר סבא, ישראל\",\"endAddress\":\"רחוב דוד רמז 1, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"azkcE_|`tEm@rDA?A?EB@N@@@?i@vDWlCFlBDt@O|AUz@KDAB?D?D?@HLH?DE~B^?BDFJ@@?BA@A?AfIbBbCTR?f@HtCn@zE`AxGrAhDz@XLl@F\\\\j@Fh@W|Ag@xB_@jBKbDm@tCw@|G}@~HaAtKOpCIpCCzC@hENvHHpDZhOLhFJtGBfFFfF?jKCd@KNArBAxB?nDBlAd@zJZ~IJhH@nEAbAMhDk@`FUpAcBpFk@zAw@dBm@bAkAfBwMtP{AbCaBpD}@dC_AjD_ChJqArE]lAy@xCg@jB_@~@_BrFqCzGs@zAm@bA}BlEkCdE_BxBoB~B{CfDmLrMcGtGgNjNyCtCSn@{BfCYZiExE{AdB_BxBg@dAQd@Q|@IdB?r@JvBPnAXnA`@dAh@z@n@r@x@h@p@\\\\r@T`BTbDRdCNpD`@jRxCpHzAjD~@|Af@~ClApQxHjJ|DzVjKdEhBpTjJvQxHzB~@dDfAdHtBtQnElDz@pHxBjJjCdAT~Bj@nNjDjEjApEtAbXbHjP~DrEx@`CVzEXzDBvJEbMOpHKtE?|A?XDh`@KtXi@jEB|FEhQO~RI~G@|DVtC`@zDbA~Ab@lB~@jMvHnGxDvSbMbIpEr@Zz@ZxBl@nCd@d@Hr@PbANv@HtANhX~DjLbBv@b@`ATdAPnDl@xDr@l@\\\\\\\\^LVRh@Fd@Kr@I\\\\Sb@m@Nk@H{@Ak@MgAe@Wz@YrAQhAK|@Q~BO|C@rDAhCD~Fb@pMHlIDjG@vA@dBH?nA@hA?nCNjCNzBT|BRpGb@rDT\"},\"bounds\":{\"northeast\":{\"lat\":32.1946203,\"lng\":34.9076796},\"southwest\":{\"lat\":32.0852113,\"lng\":34.7858994}},\"copyrights\":\"Map data ©2024 Mapa GISrael\",\"fare\":null,\"warnings\":[]}]}, {\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJm_SUkxI5HRURI7g_eQaOawg\",\"types\":[\"ESTABLISHMENT\",\"POINT_OF_INTEREST\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJq3uOIhhLHRURa_4rIVbUkFs\",\"types\":[\"STREET_ADDRESS\"]}],\"routes\":[{\"summary\":\"כביש 531 ונתיבי איילון/כביש 20\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו <b>מערב</b> על <b>הכרמל</b> לכיוון <b>ארבל</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":417,\"humanReadable\":\"0.4 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":64,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"steps\":null,\"polyline\":{\"encodedPath\":\"azkcE_|`tEMz@]vBA?A?A?A??@A??@A??@?@?@A??@@??@?@?@@??@@??@@?[zBIf@ALADGh@Gh@Ej@AL?V?@Bf@Bj@@J@N@XIr@Eh@AHSp@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"בכיכר, צאו ביציאה ה<b>שלישית</b> אל <b>ברל כצנלסון</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":297,\"humanReadable\":\"0.3 ק\\\"מ\"},\"maneuver\":\"roundabout-right\",\"duration\":{\"inSeconds\":63,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"endLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"steps\":null,\"polyline\":{\"encodedPath\":\"m~kcEqa`tEA?C@CBA??@A@?@?@?@A@?@@@?@?BBB@BB@D?B?BA@C~B^?BBD@@D@B@@A@?@??A@?@A?AhH|A\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>סוקולוב</b>\",\"distance\":{\"inMeters\":639,\"humanReadable\":\"0.6 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 דקות\"},\"startLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"endLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"steps\":null,\"polyline\":{\"encodedPath\":\"}okcEk|_tE\\\\DR@nBRR?f@HtBb@^JrAXfCf@d@HnB^vAZj@LXFVHHBlBd@NFHDPDZ@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> ליציאה אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":209,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":25,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"endLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"steps\":null,\"polyline\":{\"encodedPath\":\"amjcEmr_tEV^DJBFB`@UvAADK^[xAKb@SfA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנייה קלה <b>שמאלה</b> כדי להתמזג אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":4231,\"humanReadable\":\"4.2 ק\\\"מ\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 דקות\"},\"startLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"endLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"steps\":null,\"polyline\":{\"encodedPath\":\"{njcEse_tE?BK~C[tAQ~@OfAg@tEUpB_@bDCVCPMvA[bDCTSbCGhAGfAIpCCzC@hENvHF|B@r@D`BBt@NbJ@L@h@?B@LHlDFrCB`C@|B@hB@R?h@@h@B~B?X?N?j@?tH?R?DADADKNArBAtA?b@?h@A^@~A?DBdA?FNxDT`EHjCBh@Bj@H|B?FFhE@j@@j@BjCAbA?BA~@C|@Ch@Cj@ATCRQfBSzAAHIf@Kh@o@nBs@`CYx@Q`@w@dBm@bAeA~AEFoKbNgApAW`@U^k@|@ABeAxB[v@GPu@rBg@fBWbA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"היצמדו ל<b>שמאל</b> כדי להישאר על <b>כביש 531</b>\",\"distance\":{\"inMeters\":2391,\"humanReadable\":\"2.4 ק\\\"מ\"},\"maneuver\":\"keep-left\",\"duration\":{\"inSeconds\":83,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"endLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"steps\":null,\"polyline\":{\"encodedPath\":\"uwkcEs|vsE_ChJqArEMd@Of@Md@k@rBOf@WbAUl@IPGRABELoAlEq@`B_BxDs@zAm@bA_AnB}@|Aa@v@iBlC_BxBoB~BaBhBy@|@oE~E_@`@}BhC_AfAoDzDYZs@x@EBgBhBgChCc@b@sErE?@yCrC\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה מ<b>שמאל</b> אל <b>נתיבי איילון</b>/<wbr/><b>כביש 20</b>\",\"distance\":{\"inMeters\":14668,\"humanReadable\":\"14.7 ק\\\"מ\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":651,\"humanReadable\":\"11 דקות\"},\"startLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"endLocation\":{\"lat\":32.075641,\"lng\":34.7934112},\"steps\":null,\"polyline\":{\"encodedPath\":\"ekncEocssESn@{BfCA@WX_DlDi@j@_AdA[^iAxAU^CBQ\\\\ABO^EJKXENKl@Ep@Cr@?j@?FBx@F|@Hr@FZDVDNDRFRBJJV@BN\\\\@@PZBDPVDFNPHHNNLHNLLHLFb@TLFTH\\\\J^Hb@FP@J@VBjCNdCNpD`@lGbA|ItAdDp@jCh@~@TXHbAXLDRF`@L`@ND@ZJjAd@VJ^N`Br@`@PbBt@hJ|DdDtAj@V^NJDTJTJ`@N^P^PbCbArMrFbC`ALFtAl@^N`Ab@nAh@xGpC^NfH~C^NhChAtAl@vIpDTJdBr@hCz@ZJ`Ct@f@L`@LxAb@l@N`@JrA^~D`AD?fDx@l@NTFb@JtAZNDb@LdBf@`@LfCt@`@LlDbA|DfAh@JZHzA^b@JzFtArFtAjEjApEtArSnFnCr@zItBnEhArEx@`CVvEXB?xCB`@?jEAjDCdDE|GIzDEtBEhE?J?p@AN?J?N@H?D@D@B@x^In@AxLUzJSjEB|FEhMM~BAjGCrJE~G@|DVtC`@zDbA~Ab@lB~@xJbGpAr@nBlA~CjBbFxCrLhH`DfB`DhBDBD@RJRHXL`@LxBl@nCd@H@ZFJDf@JNBNBPBPB^DVBX@z@LjS|C|C`@jLbBrDd@dC\\\\`Dd@b@JfB`@fAX~@T~@\\\\~@ZvAf@~EzAVHjBp@|Bx@XHh@LzA^fAPf@DfANh@?j@@F?vA@dABH@z@Db@Dr@Fh@Dt@Lz@T\\\\HtBfAl@b@^VhAz@NLjCbCdBbBb@d@\\\\\\\\tAjAdAr@pAt@^R^P`@P^PFBPF\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"ב<b><span dir=\\\"ltr\\\">14</span>\u200F-<span dir=\\\"ltr\\\">HaShalom Interchange</span>\u200F</b>, היצמדו ל<b>ימין</b> ועקבו אחרי השילוט אל <b>ד' השלום</b>\",\"distance\":{\"inMeters\":254,\"humanReadable\":\"0.3 ק\\\"מ\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":41,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.075641,\"lng\":34.7934112},\"endLocation\":{\"lat\":32.0734863,\"lng\":34.7926513},\"steps\":null,\"polyline\":{\"encodedPath\":\"wwwbEyqjsETXDDLFlBn@j@Rx@PVDj@FJ@d@B`@BV@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>גבעת התחמושת</b><div style=\\\"font-size:0.9em\\\">ייתכן שהכביש סגור בשעות מסוימות או בימים מסוימים</div>\",\"distance\":{\"inMeters\":207,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":67,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0734863,\"lng\":34.7926513},\"endLocation\":{\"lat\":32.0734559,\"lng\":34.7906102},\"steps\":null,\"polyline\":{\"encodedPath\":\"ijwbEamjsEn@v@K^Mh@Gj@E~@Cn@@pA?f@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>אליעזר קפלן</b><div style=\\\"font-size:0.9em\\\">ייתכן שהכביש סגור בשעות מסוימות או בימים מסוימים</div>\",\"distance\":{\"inMeters\":553,\"humanReadable\":\"0.6 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":101,\"humanReadable\":\"2 דקות\"},\"startLocation\":{\"lat\":32.0734559,\"lng\":34.7906102},\"endLocation\":{\"lat\":32.073516,\"lng\":34.784741},\"steps\":null,\"polyline\":{\"encodedPath\":\"cjwbEi`jsE@h@?h@D~CAJ@vA?X@fCA`A?RCdBC~AAjBAdB?ZATEzB\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>ליאונרדו דה וינצ'י</b>\",\"distance\":{\"inMeters\":416,\"humanReadable\":\"0.4 ק\\\"מ\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":115,\"humanReadable\":\"2 דקות\"},\"startLocation\":{\"lat\":32.073516,\"lng\":34.784741},\"endLocation\":{\"lat\":32.0772075,\"lng\":34.7842776},\"steps\":null,\"polyline\":{\"encodedPath\":\"ojwbEs{hsEqB@a@@{@HKBc@Fc@Fw@LMAWDa@?SFo@Bq@FmANOBg@F]BI?IAEACCEC\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"ב-<b>ליאונרדו דה וינצ'י</b> קיימת פניה קלה <b>ימינה</b> ושם הכביש משתנה ל<b>ברקוביץ'</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":153,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":26,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0772075,\"lng\":34.7842776},\"endLocation\":{\"lat\":32.0777947,\"lng\":34.7857324},\"steps\":null,\"polyline\":{\"encodedPath\":\"qaxbEwxhsEEGEGGKGQEIMYGQEQMi@Ki@Os@GSCO\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":24435,\"humanReadable\":\"24.4 ק\\\"מ\"},\"duration\":{\"inSeconds\":1554,\"humanReadable\":\"26 דקות\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.0777947,\"lng\":34.7857324},\"startAddress\":\"0, כפר סבא, ישראל\",\"endAddress\":\"ברקוביץ' 12, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"azkcE_|`tEm@rDA?A?EB@N@@@?i@vDWlCFlBDt@O|AUz@KDAB?D?D?@HLH?DE~B^?BDFJ@@?BA@A?AfIbBbCTR?f@HtCn@zE`AxGrAhDz@XLl@F\\\\j@Fh@W|Ag@xB_@jBKbDm@tCw@|G}@~HaAtKOpCIpCCzC@hENvHHpDZhOLhFJtGBfFFfF?jKCd@KNArBAxB?nDBlAd@zJZ~IJhH@nEAbAMhDk@`FUpAcBpFk@zAw@dBm@bAkAfBwMtP{AbCaBpD}@dC_AjD_ChJqArE]lAy@xCg@jB_@~@_BrFqCzGs@zAm@bA}BlEkCdE_BxBoB~B{CfDmLrMcGtGgNjNyCtCSn@{BfCYZiExE{AdB_BxBg@dAQd@Q|@IdB?r@JvBPnAXnA`@dAh@z@n@r@x@h@p@\\\\r@T`BTbDRdCNpD`@jRxCpHzAjD~@|Af@~ClApQxHjJ|DzVjKdEhBpTjJvQxHzB~@dDfAdHtBtQnElDz@pHxBjJjCdAT~Bj@nNjDjEjApEtAbXbHjP~DrEx@`CVzEXzDBvJEbMOpHKtE?|A?XDh`@KtXi@jEB|FEhQO~RI~G@|DVtC`@zDbA~Ab@lB~@jMvHnGxDvSbMbIpEr@Zz@ZxBl@nCd@d@Hr@PbANv@HtANhX~D~QhCfHbAjCl@fCn@~Bx@vHbCbCz@vCbAdCl@nBVfANh@?r@@|CD|CT~ARxA^tBfAl@b@hBrAzCpChChCrBhBvChB`ChAXJZ^zBv@dBd@tBRx@Dn@v@K^UtAInBBlED|G?hECxBGlIGpCsCBgALgANw@LMAy@DSFo@B_CV_BNOCIG[m@Sc@Mc@q@{CCO\"},\"bounds\":{\"northeast\":{\"lat\":32.1946203,\"lng\":34.9076796},\"southwest\":{\"lat\":32.0732498,\"lng\":34.7842234}},\"copyrights\":\"Map data ©2024 Mapa GISrael\",\"fare\":null,\"warnings\":[]}]}, {\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJm_SUkxI5HRURI7g_eQaOawg\",\"types\":[\"ESTABLISHMENT\",\"POINT_OF_INTEREST\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJj8G3lJpLHRURHtzRkXs69w0\",\"types\":[\"ESTABLISHMENT\",\"PARKING\",\"POINT_OF_INTEREST\"]}],\"routes\":[{\"summary\":\"כביש 531 ונתיבי איילון/כביש 20\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו <b>מערב</b> על <b>הכרמל</b> לכיוון <b>ארבל</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":417,\"humanReadable\":\"0.4 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":64,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"steps\":null,\"polyline\":{\"encodedPath\":\"azkcE_|`tEMz@]vBA?A?A?A??@A??@A??@?@?@A??@@??@?@?@@??@@??@@?[zBIf@ALADGh@Gh@Ej@AL?V?@Bf@Bj@@J@N@XIr@Eh@AHSp@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"בכיכר, צאו ביציאה ה<b>שלישית</b> אל <b>ברל כצנלסון</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":297,\"humanReadable\":\"0.3 ק\\\"מ\"},\"maneuver\":\"roundabout-right\",\"duration\":{\"inSeconds\":63,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"endLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"steps\":null,\"polyline\":{\"encodedPath\":\"m~kcEqa`tEA?C@CBA??@A@?@?@?@A@?@@@?@?BBB@BB@D?B?BA@C~B^?BBD@@D@B@@A@?@??A@?@A?AhH|A\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>סוקולוב</b>\",\"distance\":{\"inMeters\":639,\"humanReadable\":\"0.6 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 דקות\"},\"startLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"endLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"steps\":null,\"polyline\":{\"encodedPath\":\"}okcEk|_tE\\\\DR@nBRR?f@HtBb@^JrAXfCf@d@HnB^vAZj@LXFVHHBlBd@NFHDPDZ@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> ליציאה אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":209,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":25,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"endLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"steps\":null,\"polyline\":{\"encodedPath\":\"amjcEmr_tEV^DJBFB`@UvAADK^[xAKb@SfA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנייה קלה <b>שמאלה</b> כדי להתמזג אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":4231,\"humanReadable\":\"4.2 ק\\\"מ\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 דקות\"},\"startLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"endLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"steps\":null,\"polyline\":{\"encodedPath\":\"{njcEse_tE?BK~C[tAQ~@OfAg@tEUpB_@bDCVCPMvA[bDCTSbCGhAGfAIpCCzC@hENvHF|B@r@D`BBt@NbJ@L@h@?B@LHlDFrCB`C@|B@hB@R?h@@h@B~B?X?N?j@?tH?R?DADADKNArBAtA?b@?h@A^@~A?DBdA?FNxDT`EHjCBh@Bj@H|B?FFhE@j@@j@BjCAbA?BA~@C|@Ch@Cj@ATCRQfBSzAAHIf@Kh@o@nBs@`CYx@Q`@w@dBm@bAeA~AEFoKbNgApAW`@U^k@|@ABeAxB[v@GPu@rBg@fBWbA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"היצמדו ל<b>שמאל</b> כדי להישאר על <b>כביש 531</b>\",\"distance\":{\"inMeters\":2391,\"humanReadable\":\"2.4 ק\\\"מ\"},\"maneuver\":\"keep-left\",\"duration\":{\"inSeconds\":83,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"endLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"steps\":null,\"polyline\":{\"encodedPath\":\"uwkcEs|vsE_ChJqArEMd@Of@Md@k@rBOf@WbAUl@IPGRABELoAlEq@`B_BxDs@zAm@bA_AnB}@|Aa@v@iBlC_BxBoB~BaBhBy@|@oE~E_@`@}BhC_AfAoDzDYZs@x@EBgBhBgChCc@b@sErE?@yCrC\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה מ<b>שמאל</b> אל <b>נתיבי איילון</b>/<wbr/><b>כביש 20</b>\",\"distance\":{\"inMeters\":14668,\"humanReadable\":\"14.7 ק\\\"מ\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":651,\"humanReadable\":\"11 דקות\"},\"startLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"endLocation\":{\"lat\":32.075641,\"lng\":34.7934112},\"steps\":null,\"polyline\":{\"encodedPath\":\"ekncEocssESn@{BfCA@WX_DlDi@j@_AdA[^iAxAU^CBQ\\\\ABO^EJKXENKl@Ep@Cr@?j@?FBx@F|@Hr@FZDVDNDRFRBJJV@BN\\\\@@PZBDPVDFNPHHNNLHNLLHLFb@TLFTH\\\\J^Hb@FP@J@VBjCNdCNpD`@lGbA|ItAdDp@jCh@~@TXHbAXLDRF`@L`@ND@ZJjAd@VJ^N`Br@`@PbBt@hJ|DdDtAj@V^NJDTJTJ`@N^P^PbCbArMrFbC`ALFtAl@^N`Ab@nAh@xGpC^NfH~C^NhChAtAl@vIpDTJdBr@hCz@ZJ`Ct@f@L`@LxAb@l@N`@JrA^~D`AD?fDx@l@NTFb@JtAZNDb@LdBf@`@LfCt@`@LlDbA|DfAh@JZHzA^b@JzFtArFtAjEjApEtArSnFnCr@zItBnEhArEx@`CVvEXB?xCB`@?jEAjDCdDE|GIzDEtBEhE?J?p@AN?J?N@H?D@D@B@x^In@AxLUzJSjEB|FEhMM~BAjGCrJE~G@|DVtC`@zDbA~Ab@lB~@xJbGpAr@nBlA~CjBbFxCrLhH`DfB`DhBDBD@RJRHXL`@LxBl@nCd@H@ZFJDf@JNBNBPBPB^DVBX@z@LjS|C|C`@jLbBrDd@dC\\\\`Dd@b@JfB`@fAX~@T~@\\\\~@ZvAf@~EzAVHjBp@|Bx@XHh@LzA^fAPf@DfANh@?j@@F?vA@dABH@z@Db@Dr@Fh@Dt@Lz@T\\\\HtBfAl@b@^VhAz@NLjCbCdBbBb@d@\\\\\\\\tAjAdAr@pAt@^R^P`@P^PFBPF\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"ב<b><span dir=\\\"ltr\\\">14</span>\u200F-<span dir=\\\"ltr\\\">HaShalom Interchange</span>\u200F</b>, היצמדו ל<b>ימין</b> ועקבו אחרי השילוט אל <b>ד' השלום</b>\",\"distance\":{\"inMeters\":254,\"humanReadable\":\"0.3 ק\\\"מ\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":41,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.075641,\"lng\":34.7934112},\"endLocation\":{\"lat\":32.0734863,\"lng\":34.7926513},\"steps\":null,\"polyline\":{\"encodedPath\":\"wwwbEyqjsETXDDLFlBn@j@Rx@PVDj@FJ@d@B`@BV@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>גבעת התחמושת</b><div style=\\\"font-size:0.9em\\\">ייתכן שהכביש סגור בשעות מסוימות או בימים מסוימים</div>\",\"distance\":{\"inMeters\":207,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":67,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0734863,\"lng\":34.7926513},\"endLocation\":{\"lat\":32.0734559,\"lng\":34.7906102},\"steps\":null,\"polyline\":{\"encodedPath\":\"ijwbEamjsEn@v@K^Mh@Gj@E~@Cn@@pA?f@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>אליעזר קפלן</b><div style=\\\"font-size:0.9em\\\">ייתכן שהכביש סגור בשעות מסוימות או בימים מסוימים</div>\",\"distance\":{\"inMeters\":553,\"humanReadable\":\"0.6 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":101,\"humanReadable\":\"2 דקות\"},\"startLocation\":{\"lat\":32.0734559,\"lng\":34.7906102},\"endLocation\":{\"lat\":32.073516,\"lng\":34.784741},\"steps\":null,\"polyline\":{\"encodedPath\":\"cjwbEi`jsE@h@?h@D~CAJ@vA?X@fCA`A?RCdBC~AAjBAdB?ZATEzB\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>ליאונרדו דה וינצ'י</b>\",\"distance\":{\"inMeters\":416,\"humanReadable\":\"0.4 ק\\\"מ\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":115,\"humanReadable\":\"2 דקות\"},\"startLocation\":{\"lat\":32.073516,\"lng\":34.784741},\"endLocation\":{\"lat\":32.0772075,\"lng\":34.7842776},\"steps\":null,\"polyline\":{\"encodedPath\":\"ojwbEs{hsEqB@a@@{@HKBc@Fc@Fw@LMAWDa@?SFo@Bq@FmANOBg@F]BI?IAEACCEC\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"ב-<b>ליאונרדו דה וינצ'י</b> קיימת פניה קלה <b>ימינה</b> ושם הכביש משתנה ל<b>ברקוביץ'</b>\",\"distance\":{\"inMeters\":259,\"humanReadable\":\"0.3 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":46,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0772075,\"lng\":34.7842776},\"endLocation\":{\"lat\":32.07815,\"lng\":34.786781},\"steps\":null,\"polyline\":{\"encodedPath\":\"qaxbEwxhsEEGEGGKGQEIMYGQEQMi@Ki@Os@GSGWcAiE\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":24541,\"humanReadable\":\"24.5 ק\\\"מ\"},\"duration\":{\"inSeconds\":1574,\"humanReadable\":\"26 דקות\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.07815,\"lng\":34.786781},\"startAddress\":\"0, כפר סבא, ישראל\",\"endAddress\":\"ברקוביץ' 7, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"azkcE_|`tEm@rDA?A?EB@N@@@?i@vDWlCFlBDt@O|AUz@KDAB?D?D?@HLH?DE~B^?BDFJ@@?BA@A?AfIbBbCTR?f@HtCn@zE`AxGrAhDz@XLl@F\\\\j@Fh@W|Ag@xB_@jBKbDm@tCw@|G}@~HaAtKOpCIpCCzC@hENvHHpDZhOLhFJtGBfFFfF?jKCd@KNArBAxB?nDBlAd@zJZ~IJhH@nEAbAMhDk@`FUpAcBpFk@zAw@dBm@bAkAfBwMtP{AbCaBpD}@dC_AjD_ChJqArE]lAy@xCg@jB_@~@_BrFqCzGs@zAm@bA}BlEkCdE_BxBoB~B{CfDmLrMcGtGgNjNyCtCSn@{BfCYZiExE{AdB_BxBg@dAQd@Q|@IdB?r@JvBPnAXnA`@dAh@z@n@r@x@h@p@\\\\r@T`BTbDRdCNpD`@jRxCpHzAjD~@|Af@~ClApQxHjJ|DzVjKdEhBpTjJvQxHzB~@dDfAdHtBtQnElDz@pHxBjJjCdAT~Bj@nNjDjEjApEtAbXbHjP~DrEx@`CVzEXzDBvJEbMOpHKtE?|A?XDh`@KtXi@jEB|FEhQO~RI~G@|DVtC`@zDbA~Ab@lB~@jMvHnGxDvSbMbIpEr@Zz@ZxBl@nCd@d@Hr@PbANv@HtANhX~D~QhCfHbAjCl@fCn@~Bx@vHbCbCz@vCbAdCl@nBVfANh@?r@@|CD|CT~ARxA^tBfAl@b@hBrAzCpChChCrBhBvChB`ChAXJZ^zBv@dBd@tBRx@Dn@v@K^UtAInBBlED|G?hECxBGlIGpCsCBgALgANw@LMAy@DSFo@B_CV_BNOCIG[m@Sc@Mc@q@{CkAaF\"},\"bounds\":{\"northeast\":{\"lat\":32.1946203,\"lng\":34.9076796},\"southwest\":{\"lat\":32.0732498,\"lng\":34.7842234}},\"copyrights\":\"Map data ©2024 Mapa GISrael\",\"fare\":null,\"warnings\":[]}]}, {\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJm_SUkxI5HRURI7g_eQaOawg\",\"types\":[\"ESTABLISHMENT\",\"POINT_OF_INTEREST\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJBY70aoNLHRURb8xzWhm_YCA\",\"types\":[\"ESTABLISHMENT\",\"POINT_OF_INTEREST\"]}],\"routes\":[{\"summary\":\"כביש 531 ונתיבי איילון/כביש 20\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו <b>מערב</b> על <b>הכרמל</b> לכיוון <b>ארבל</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":417,\"humanReadable\":\"0.4 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":64,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"steps\":null,\"polyline\":{\"encodedPath\":\"azkcE_|`tEMz@]vBA?A?A?A??@A??@A??@?@?@A??@@??@?@?@@??@@??@@?[zBIf@ALADGh@Gh@Ej@AL?V?@Bf@Bj@@J@N@XIr@Eh@AHSp@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"בכיכר, צאו ביציאה ה<b>שלישית</b> אל <b>ברל כצנלסון</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":297,\"humanReadable\":\"0.3 ק\\\"מ\"},\"maneuver\":\"roundabout-right\",\"duration\":{\"inSeconds\":63,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"endLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"steps\":null,\"polyline\":{\"encodedPath\":\"m~kcEqa`tEA?C@CBA??@A@?@?@?@A@?@@@?@?BBB@BB@D?B?BA@C~B^?BBD@@D@B@@A@?@??A@?@A?AhH|A\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>סוקולוב</b>\",\"distance\":{\"inMeters\":639,\"humanReadable\":\"0.6 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 דקות\"},\"startLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"endLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"steps\":null,\"polyline\":{\"encodedPath\":\"}okcEk|_tE\\\\DR@nBRR?f@HtBb@^JrAXfCf@d@HnB^vAZj@LXFVHHBlBd@NFHDPDZ@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> ליציאה אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":209,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":25,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"endLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"steps\":null,\"polyline\":{\"encodedPath\":\"amjcEmr_tEV^DJBFB`@UvAADK^[xAKb@SfA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנייה קלה <b>שמאלה</b> כדי להתמזג אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":4231,\"humanReadable\":\"4.2 ק\\\"מ\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 דקות\"},\"startLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"endLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"steps\":null,\"polyline\":{\"encodedPath\":\"{njcEse_tE?BK~C[tAQ~@OfAg@tEUpB_@bDCVCPMvA[bDCTSbCGhAGfAIpCCzC@hENvHF|B@r@D`BBt@NbJ@L@h@?B@LHlDFrCB`C@|B@hB@R?h@@h@B~B?X?N?j@?tH?R?DADADKNArBAtA?b@?h@A^@~A?DBdA?FNxDT`EHjCBh@Bj@H|B?FFhE@j@@j@BjCAbA?BA~@C|@Ch@Cj@ATCRQfBSzAAHIf@Kh@o@nBs@`CYx@Q`@w@dBm@bAeA~AEFoKbNgApAW`@U^k@|@ABeAxB[v@GPu@rBg@fBWbA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"היצמדו ל<b>שמאל</b> כדי להישאר על <b>כביש 531</b>\",\"distance\":{\"inMeters\":2391,\"humanReadable\":\"2.4 ק\\\"מ\"},\"maneuver\":\"keep-left\",\"duration\":{\"inSeconds\":83,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"endLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"steps\":null,\"polyline\":{\"encodedPath\":\"uwkcEs|vsE_ChJqArEMd@Of@Md@k@rBOf@WbAUl@IPGRABELoAlEq@`B_BxDs@zAm@bA_AnB}@|Aa@v@iBlC_BxBoB~BaBhBy@|@oE~E_@`@}BhC_AfAoDzDYZs@x@EBgBhBgChCc@b@sErE?@yCrC\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה מ<b>שמאל</b> אל <b>נתיבי איילון</b>/<wbr/><b>כביש 20</b>\",\"distance\":{\"inMeters\":14668,\"humanReadable\":\"14.7 ק\\\"מ\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":651,\"humanReadable\":\"11 דקות\"},\"startLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"endLocation\":{\"lat\":32.075641,\"lng\":34.7934112},\"steps\":null,\"polyline\":{\"encodedPath\":\"ekncEocssESn@{BfCA@WX_DlDi@j@_AdA[^iAxAU^CBQ\\\\ABO^EJKXENKl@Ep@Cr@?j@?FBx@F|@Hr@FZDVDNDRFRBJJV@BN\\\\@@PZBDPVDFNPHHNNLHNLLHLFb@TLFTH\\\\J^Hb@FP@J@VBjCNdCNpD`@lGbA|ItAdDp@jCh@~@TXHbAXLDRF`@L`@ND@ZJjAd@VJ^N`Br@`@PbBt@hJ|DdDtAj@V^NJDTJTJ`@N^P^PbCbArMrFbC`ALFtAl@^N`Ab@nAh@xGpC^NfH~C^NhChAtAl@vIpDTJdBr@hCz@ZJ`Ct@f@L`@LxAb@l@N`@JrA^~D`AD?fDx@l@NTFb@JtAZNDb@LdBf@`@LfCt@`@LlDbA|DfAh@JZHzA^b@JzFtArFtAjEjApEtArSnFnCr@zItBnEhArEx@`CVvEXB?xCB`@?jEAjDCdDE|GIzDEtBEhE?J?p@AN?J?N@H?D@D@B@x^In@AxLUzJSjEB|FEhMM~BAjGCrJE~G@|DVtC`@zDbA~Ab@lB~@xJbGpAr@nBlA~CjBbFxCrLhH`DfB`DhBDBD@RJRHXL`@LxBl@nCd@H@ZFJDf@JNBNBPBPB^DVBX@z@LjS|C|C`@jLbBrDd@dC\\\\`Dd@b@JfB`@fAX~@T~@\\\\~@ZvAf@~EzAVHjBp@|Bx@XHh@LzA^fAPf@DfANh@?j@@F?vA@dABH@z@Db@Dr@Fh@Dt@Lz@T\\\\HtBfAl@b@^VhAz@NLjCbCdBbBb@d@\\\\\\\\tAjAdAr@pAt@^R^P`@P^PFBPF\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"ב<b><span dir=\\\"ltr\\\">14</span>\u200F-<span dir=\\\"ltr\\\">HaShalom Interchange</span>\u200F</b>, היצמדו ל<b>ימין</b> ועקבו אחרי השילוט אל <b>ד' השלום</b>\",\"distance\":{\"inMeters\":254,\"humanReadable\":\"0.3 ק\\\"מ\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":41,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.075641,\"lng\":34.7934112},\"endLocation\":{\"lat\":32.0734863,\"lng\":34.7926513},\"steps\":null,\"polyline\":{\"encodedPath\":\"wwwbEyqjsETXDDLFlBn@j@Rx@PVDj@FJ@d@B`@BV@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>גבעת התחמושת</b><div style=\\\"font-size:0.9em\\\">ייתכן שהכביש סגור בשעות מסוימות או בימים מסוימים</div>\",\"distance\":{\"inMeters\":207,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":67,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0734863,\"lng\":34.7926513},\"endLocation\":{\"lat\":32.0734559,\"lng\":34.7906102},\"steps\":null,\"polyline\":{\"encodedPath\":\"ijwbEamjsEn@v@K^Mh@Gj@E~@Cn@@pA?f@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>אליעזר קפלן</b><div style=\\\"font-size:0.9em\\\">ייתכן שהכביש סגור בשעות מסוימות או בימים מסוימים</div>\",\"distance\":{\"inMeters\":653,\"humanReadable\":\"0.7 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":131,\"humanReadable\":\"2 דקות\"},\"startLocation\":{\"lat\":32.0734559,\"lng\":34.7906102},\"endLocation\":{\"lat\":32.0735157,\"lng\":34.7836836},\"steps\":null,\"polyline\":{\"encodedPath\":\"cjwbEi`jsE@h@?h@D~CAJ@vA?X@fCA`A?RCdBC~AAjBAdB?ZATEzB?nB@HAxA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>דובנוב</b>\",\"distance\":{\"inMeters\":81,\"humanReadable\":\"81 מ'\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":36,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0735157,\"lng\":34.7836836},\"endLocation\":{\"lat\":32.0742408,\"lng\":34.7836511},\"steps\":null,\"polyline\":{\"encodedPath\":\"ojwbE_uhsEs@?S@w@@O@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":24047,\"humanReadable\":\"24.0 ק\\\"מ\"},\"duration\":{\"inSeconds\":1479,\"humanReadable\":\"25 דקות\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.0742408,\"lng\":34.7836511},\"startAddress\":\"0, כפר סבא, ישראל\",\"endAddress\":\"דובנוב 4, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"azkcE_|`tEm@rDA?A?EB@N@@@?i@vDWlCFlBDt@O|AUz@KDAB?D?D?@HLH?DE~B^?BDFJ@@?BA@A?AfIbBbCTR?f@HtCn@zE`AxGrAhDz@XLl@F\\\\j@Fh@W|Ag@xB_@jBKbDm@tCw@|G}@~HaAtKOpCIpCCzC@hENvHHpDZhOLhFJtGBfFFfF?jKCd@KNArBAxB?nDBlAd@zJZ~IJhH@nEAbAMhDk@`FUpAcBpFk@zAw@dBm@bAkAfBwMtP{AbCaBpD}@dC_AjD_ChJqArE]lAy@xCg@jB_@~@_BrFqCzGs@zAm@bA}BlEkCdE_BxBoB~B{CfDmLrMcGtGgNjNyCtCSn@{BfCYZiExE{AdB_BxBg@dAQd@Q|@IdB?r@JvBPnAXnA`@dAh@z@n@r@x@h@p@\\\\r@T`BTbDRdCNpD`@jRxCpHzAjD~@|Af@~ClApQxHjJ|DzVjKdEhBpTjJvQxHzB~@dDfAdHtBtQnElDz@pHxBjJjCdAT~Bj@nNjDjEjApEtAbXbHjP~DrEx@`CVzEXzDBvJEbMOpHKtE?|A?XDh`@KtXi@jEB|FEhQO~RI~G@|DVtC`@zDbA~Ab@lB~@jMvHnGxDvSbMbIpEr@Zz@ZxBl@nCd@d@Hr@PbANv@HtANhX~D~QhCfHbAjCl@fCn@~Bx@vHbCbCz@vCbAdCl@nBVfANh@?r@@|CD|CT~ARxA^tBfAl@b@hBrAzCpChChCrBhBvChB`ChAXJZ^zBv@dBd@tBRx@Dn@v@K^UtAInBBlED|G?hECxBGlIGpC@xBAxAs@?kABO@\"},\"bounds\":{\"northeast\":{\"lat\":32.1946203,\"lng\":34.9076796},\"southwest\":{\"lat\":32.0732498,\"lng\":34.7836511}},\"copyrights\":\"Map data ©2024 Mapa GISrael\",\"fare\":null,\"warnings\":[]}]}, {\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJm_SUkxI5HRURI7g_eQaOawg\",\"types\":[\"ESTABLISHMENT\",\"POINT_OF_INTEREST\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJhYaKaINLHRURRMIT2a6LAHM\",\"types\":[\"ESTABLISHMENT\",\"PARKING\",\"POINT_OF_INTEREST\"]}],\"routes\":[{\"summary\":\"כביש 531 ונתיבי איילון/כביש 20\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו <b>מערב</b> על <b>הכרמל</b> לכיוון <b>ארבל</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":417,\"humanReadable\":\"0.4 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":64,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"steps\":null,\"polyline\":{\"encodedPath\":\"azkcE_|`tEMz@]vBA?A?A?A??@A??@A??@?@?@A??@@??@?@?@@??@@??@@?[zBIf@ALADGh@Gh@Ej@AL?V?@Bf@Bj@@J@N@XIr@Eh@AHSp@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"בכיכר, צאו ביציאה ה<b>שלישית</b> אל <b>ברל כצנלסון</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":297,\"humanReadable\":\"0.3 km\"},\"maneuver\":\"roundabout-right\",\"duration\":{\"inSeconds\":63,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"endLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"steps\":null,\"polyline\":{\"encodedPath\":\"m~kcEqa`tEA?C@CBA??@A@?@?@?@A@?@@@?@?BBB@BB@D?B?BA@C~B^?BBD@@D@B@@A@?@??A@?@A?AhH|A\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>סוקולוב</b>\",\"distance\":{\"inMeters\":639,\"humanReadable\":\"0.6 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"endLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"steps\":null,\"polyline\":{\"encodedPath\":\"}okcEk|_tE\\\\DR@nBRR?f@HtBb@^JrAXfCf@d@HnB^vAZj@LXFVHHBlBd@NFHDPDZ@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> ליציאה אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":209,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":25,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"endLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"steps\":null,\"polyline\":{\"encodedPath\":\"amjcEmr_tEV^DJBFB`@UvAADK^[xAKb@SfA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנייה קלה <b>שמאלה</b> כדי להתמזג אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":4231,\"humanReadable\":\"4.2 km\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"endLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"steps\":null,\"polyline\":{\"encodedPath\":\"{njcEse_tE?BK~C[tAQ~@OfAg@tEUpB_@bDCVCPMvA[bDCTSbCGhAGfAIpCCzC@hENvHF|B@r@D`BBt@NbJ@L@h@?B@LHlDFrCB`C@|B@hB@R?h@@h@B~B?X?N?j@?tH?R?DADADKNArBAtA?b@?h@A^@~A?DBdA?FNxDT`EHjCBh@Bj@H|B?FFhE@j@@j@BjCAbA?BA~@C|@Ch@Cj@ATCRQfBSzAAHIf@Kh@o@nBs@`CYx@Q`@w@dBm@bAeA~AEFoKbNgApAW`@U^k@|@ABeAxB[v@GPu@rBg@fBWbA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"היצמדו ל<b>שמאל</b> כדי להישאר על <b>כביש 531</b>\",\"distance\":{\"inMeters\":2391,\"humanReadable\":\"2.4 km\"},\"maneuver\":\"keep-left\",\"duration\":{\"inSeconds\":83,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"endLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"steps\":null,\"polyline\":{\"encodedPath\":\"uwkcEs|vsE_ChJqArEMd@Of@Md@k@rBOf@WbAUl@IPGRABELoAlEq@`B_BxDs@zAm@bA_AnB}@|Aa@v@iBlC_BxBoB~BaBhBy@|@oE~E_@`@}BhC_AfAoDzDYZs@x@EBgBhBgChCc@b@sErE?@yCrC\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה מ<b>שמאל</b> אל <b>נתיבי איילון</b>/<wbr/><b>כביש 20</b>\",\"distance\":{\"inMeters\":14668,\"humanReadable\":\"14.7 km\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":651,\"humanReadable\":\"11 mins\"},\"startLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"endLocation\":{\"lat\":32.075641,\"lng\":34.7934112},\"steps\":null,\"polyline\":{\"encodedPath\":\"ekncEocssESn@{BfCA@WX_DlDi@j@_AdA[^iAxAU^CBQ\\\\ABO^EJKXENKl@Ep@Cr@?j@?FBx@F|@Hr@FZDVDNDRFRBJJV@BN\\\\@@PZBDPVDFNPHHNNLHNLLHLFb@TLFTH\\\\J^Hb@FP@J@VBjCNdCNpD`@lGbA|ItAdDp@jCh@~@TXHbAXLDRF`@L`@ND@ZJjAd@VJ^N`Br@`@PbBt@hJ|DdDtAj@V^NJDTJTJ`@N^P^PbCbArMrFbC`ALFtAl@^N`Ab@nAh@xGpC^NfH~C^NhChAtAl@vIpDTJdBr@hCz@ZJ`Ct@f@L`@LxAb@l@N`@JrA^~D`AD?fDx@l@NTFb@JtAZNDb@LdBf@`@LfCt@`@LlDbA|DfAh@JZHzA^b@JzFtArFtAjEjApEtArSnFnCr@zItBnEhArEx@`CVvEXB?xCB`@?jEAjDCdDE|GIzDEtBEhE?J?p@AN?J?N@H?D@D@B@x^In@AxLUzJSjEB|FEhMM~BAjGCrJE~G@|DVtC`@zDbA~Ab@lB~@xJbGpAr@nBlA~CjBbFxCrLhH`DfB`DhBDBD@RJRHXL`@LxBl@nCd@H@ZFJDf@JNBNBPBPB^DVBX@z@LjS|C|C`@jLbBrDd@dC\\\\`Dd@b@JfB`@fAX~@T~@\\\\~@ZvAf@~EzAVHjBp@|Bx@XHh@LzA^fAPf@DfANh@?j@@F?vA@dABH@z@Db@Dr@Fh@Dt@Lz@T\\\\HtBfAl@b@^VhAz@NLjCbCdBbBb@d@\\\\\\\\tAjAdAr@pAt@^R^P`@P^PFBPF\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"ב<b><span dir=\\\"ltr\\\">14</span>\u200F-<span dir=\\\"ltr\\\">HaShalom Interchange</span>\u200F</b>, היצמדו ל<b>ימין</b> ועקבו אחרי השילוט אל <b>ד' השלום</b>\",\"distance\":{\"inMeters\":254,\"humanReadable\":\"0.3 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":41,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.075641,\"lng\":34.7934112},\"endLocation\":{\"lat\":32.0734863,\"lng\":34.7926513},\"steps\":null,\"polyline\":{\"encodedPath\":\"wwwbEyqjsETXDDLFlBn@j@Rx@PVDj@FJ@d@B`@BV@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>גבעת התחמושת</b><div style=\\\"font-size:0.9em\\\">ייתכן שהכביש סגור בשעות מסוימות או בימים מסוימים</div>\",\"distance\":{\"inMeters\":207,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":67,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0734863,\"lng\":34.7926513},\"endLocation\":{\"lat\":32.0734559,\"lng\":34.7906102},\"steps\":null,\"polyline\":{\"encodedPath\":\"ijwbEamjsEn@v@K^Mh@Gj@E~@Cn@@pA?f@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>אליעזר קפלן</b><div style=\\\"font-size:0.9em\\\">ייתכן שהכביש סגור בשעות מסוימות או בימים מסוימים</div>\",\"distance\":{\"inMeters\":653,\"humanReadable\":\"0.7 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":131,\"humanReadable\":\"2 mins\"},\"startLocation\":{\"lat\":32.0734559,\"lng\":34.7906102},\"endLocation\":{\"lat\":32.0735157,\"lng\":34.7836836},\"steps\":null,\"polyline\":{\"encodedPath\":\"cjwbEi`jsE@h@?h@D~CAJ@vA?X@fCA`A?RCdBC~AAjBAdB?ZATEzB?nB@HAxA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>דובנוב</b>\",\"distance\":{\"inMeters\":40,\"humanReadable\":\"40 m\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":19,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0735157,\"lng\":34.7836836},\"endLocation\":{\"lat\":32.0738768,\"lng\":34.7836714},\"steps\":null,\"polyline\":{\"encodedPath\":\"ojwbE_uhsEs@?S@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b>\",\"distance\":{\"inMeters\":79,\"humanReadable\":\"79 m\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":22,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0738768,\"lng\":34.7836714},\"endLocation\":{\"lat\":32.0740503,\"lng\":34.7843048},\"steps\":null,\"polyline\":{\"encodedPath\":\"wlwbE}thsE@cB?G?IAGCCE?E?E?G@C@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":48,\"humanReadable\":\"48 m\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":16,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0740503,\"lng\":34.7843048},\"endLocation\":{\"lat\":32.0740205,\"lng\":34.78379990000001},\"steps\":null,\"polyline\":{\"encodedPath\":\"ymwbE{xhsEDbB\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":24133,\"humanReadable\":\"24.1 km\"},\"duration\":{\"inSeconds\":1500,\"humanReadable\":\"25 mins\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.0740205,\"lng\":34.78379990000001},\"startAddress\":\"0, כפר סבא, ישראל\",\"endAddress\":\"דובנוב 4, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"azkcE_|`tEm@rDA?A?EB@N@@@?i@vDWlCFlBDt@O|AUz@KDAB?D?D?@HLH?DE~B^?BDFJ@@?BA@A?AfIbBbCTR?f@HtCn@zE`AxGrAhDz@XLl@F\\\\j@Fh@W|Ag@xB_@jBKbDm@tCw@|G}@~HaAtKOpCIpCCzC@hENvHHpDZhOLhFJtGBfFFfF?jKCd@KNArBAxB?nDBlAd@zJZ~IJhH@nEAbAMhDk@`FUpAcBpFk@zAw@dBm@bAkAfBwMtP{AbCaBpD}@dC_AjD_ChJqArE]lAy@xCg@jB_@~@_BrFqCzGs@zAm@bA}BlEkCdE_BxBoB~B{CfDmLrMcGtGgNjNyCtCSn@{BfCYZiExE{AdB_BxBg@dAQd@Q|@IdB?r@JvBPnAXnA`@dAh@z@n@r@x@h@p@\\\\r@T`BTbDRdCNpD`@jRxCpHzAjD~@|Af@~ClApQxHjJ|DzVjKdEhBpTjJvQxHzB~@dDfAdHtBtQnElDz@pHxBjJjCdAT~Bj@nNjDjEjApEtAbXbHjP~DrEx@`CVzEXzDBvJEbMOpHKtE?|A?XDh`@KtXi@jEB|FEhQO~RI~G@|DVtC`@zDbA~Ab@lB~@jMvHnGxDvSbMbIpEr@Zz@ZxBl@nCd@d@Hr@PbANv@HtANhX~D~QhCfHbAjCl@fCn@~Bx@vHbCbCz@vCbAdCl@nBVfANh@?r@@|CD|CT~ARxA^tBfAl@b@hBrAzCpChChCrBhBvChB`ChAXJZ^zBv@dBd@tBRx@Dn@v@K^UtAInBBlED|G?hECxBGlIGpC@xBAxAs@?S@@cB?QEKY@C@DbB\"},\"bounds\":{\"northeast\":{\"lat\":32.1946203,\"lng\":34.9076796},\"southwest\":{\"lat\":32.0732498,\"lng\":34.7836714}},\"copyrights\":\"Map data ©2024 Mapa GISrael\",\"fare\":null,\"warnings\":[]}]}]\n", DirectionsResult[].class);
        DirectionsResult[] serializedWalkingDirectionsResults = objectMapper.readValue("[{\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJEw6XEJJLHRURKt2lRMd6y_w\",\"types\":[\"STREET_ADDRESS\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJ38yR5YVLHRURVv83pjGg3hQ\",\"types\":[\"STREET_ADDRESS\"]}],\"routes\":[{\"summary\":\"בלוך\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו בכיוון <b>דרום</b> על <b>רחוב דוד רמז</b> לעבר <b>ארלוזורוב</b>\",\"distance\":{\"inMeters\":90,\"humanReadable\":\"90 מ'\"},\"maneuver\":null,\"duration\":{\"inSeconds\":78,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"endLocation\":{\"lat\":32.0844217,\"lng\":34.7857132},\"steps\":null,\"polyline\":{\"encodedPath\":\"qsybE{bisE@?n@Hv@Lb@FND\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>בלוך</b>\",\"distance\":{\"inMeters\":555,\"humanReadable\":\"0.6 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":461,\"humanReadable\":\"8 דקות\"},\"startLocation\":{\"lat\":32.0844217,\"lng\":34.7857132},\"endLocation\":{\"lat\":32.08149350000001,\"lng\":34.7812396},\"steps\":null,\"polyline\":{\"encodedPath\":\"snybEuaisE\\\\LZNZR`@ZlEbGnCtDPTl@pADJPr@Jh@HbAAr@FT?T\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>שלמה אבן גבירול</b>\",\"distance\":{\"inMeters\":118,\"humanReadable\":\"0.1 ק\\\"מ\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":103,\"humanReadable\":\"2 דקות\"},\"startLocation\":{\"lat\":32.08149350000001,\"lng\":34.7812396},\"endLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"steps\":null,\"polyline\":{\"encodedPath\":\"i|xbEwehsEP?`A@T?hB@\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":56,\"humanReadable\":\"56 מ'\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":48,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"steps\":null,\"polyline\":{\"encodedPath\":\"uuxbEsehsE?h@?j@?`@\"},\"travelMode\":\"WALKING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":819,\"humanReadable\":\"0.8 ק\\\"מ\"},\"duration\":{\"inSeconds\":690,\"humanReadable\":\"12 דקות\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"startAddress\":\"רחוב דוד רמז 1, תל אביב-יפו, ישראל\",\"endAddress\":\"מלכי ישראל 500, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"qsybE{bisElC^l@Rv@b@`@ZlEbG`DjEr@|A\\\\|AHbAAr@FT?TrA@~B@?vB\"},\"bounds\":{\"northeast\":{\"lat\":32.0852113,\"lng\":34.7858994},\"southwest\":{\"lat\":32.0804302,\"lng\":34.78062}},\"copyrights\":\"Map data ©2024 Google, Mapa GISrael\",\"fare\":null,\"warnings\":[\"הוראות ההליכה הן בגרסת הבטא. חשוב לשים לב – ייתכן שבמסלול זה חסרים נתיבים להולכי רגל או מדרכות.\"]}]}, {\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJq3uOIhhLHRURa_4rIVbUkFs\",\"types\":[\"STREET_ADDRESS\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJ38yR5YVLHRURVv83pjGg3hQ\",\"types\":[\"STREET_ADDRESS\"]}],\"routes\":[{\"summary\":\"דובנוב ושדרות דוד המלך\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו בכיוון <b>צפון מזרח</b> אל <b>ברקוביץ'</b>\",\"distance\":{\"inMeters\":12,\"humanReadable\":\"12 מ'\"},\"maneuver\":null,\"duration\":{\"inSeconds\":9,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0777059,\"lng\":34.785719},\"endLocation\":{\"lat\":32.077807,\"lng\":34.785772},\"steps\":null,\"polyline\":{\"encodedPath\":\"udxbEwaisESI\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>ברקוביץ'</b>\",\"distance\":{\"inMeters\":12,\"humanReadable\":\"12 מ'\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":9,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.077807,\"lng\":34.785772},\"endLocation\":{\"lat\":32.0777692,\"lng\":34.78565},\"steps\":null,\"polyline\":{\"encodedPath\":\"iexbEabisEFV\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b>\",\"distance\":{\"inMeters\":259,\"humanReadable\":\"0.3 ק\\\"מ\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":212,\"humanReadable\":\"4 דקות\"},\"startLocation\":{\"lat\":32.0777692,\"lng\":34.78565},\"endLocation\":{\"lat\":32.078313,\"lng\":34.783181},\"steps\":null,\"polyline\":{\"encodedPath\":\"aexbEiaisEOXGHAFAHAFATAJAHCDC@_@PEDABABCBAFAF?F@H@H@N?F?H?BAB?@ABABCDEFAB?DAB?H?B?F?FBND`A?RAF?\\\\CZ?DCN\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>דובנוב</b>\",\"distance\":{\"inMeters\":208,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":165,\"humanReadable\":\"3 דקות\"},\"startLocation\":{\"lat\":32.078313,\"lng\":34.783181},\"endLocation\":{\"lat\":32.0801758,\"lng\":34.7834033},\"steps\":null,\"polyline\":{\"encodedPath\":\"mhxbE{qhsEmEWgDS\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>שדרות דוד המלך</b>\",\"distance\":{\"inMeters\":207,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":175,\"humanReadable\":\"3 דקות\"},\"startLocation\":{\"lat\":32.0801758,\"lng\":34.7834033},\"endLocation\":{\"lat\":32.080353,\"lng\":34.7812181},\"steps\":null,\"polyline\":{\"encodedPath\":\"ctxbEgshsEUjGG~AAl@AX\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>שלמה אבן גבירול</b>\",\"distance\":{\"inMeters\":9,\"humanReadable\":\"9 מ'\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":8,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.080353,\"lng\":34.7812181},\"endLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"steps\":null,\"polyline\":{\"encodedPath\":\"euxbEsehsEO?\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":56,\"humanReadable\":\"56 מ'\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":48,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"steps\":null,\"polyline\":{\"encodedPath\":\"uuxbEsehsE?h@?j@?`@\"},\"travelMode\":\"WALKING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":763,\"humanReadable\":\"0.8 ק\\\"מ\"},\"duration\":{\"inSeconds\":626,\"humanReadable\":\"10 דקות\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.0777059,\"lng\":34.785719},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"startAddress\":\"ברקוביץ' 12, תל אביב-יפו, ישראל\",\"endAddress\":\"מלכי ישראל 500, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"udxbEwaisESIFVWb@Gn@CTGFe@VCFEJANDj@ARMTCVBb@DtAAd@C`@CNmEWgDSUjGIlCAXO??tA?`@\"},\"bounds\":{\"northeast\":{\"lat\":32.0804313,\"lng\":34.785772},\"southwest\":{\"lat\":32.0777059,\"lng\":34.78062}},\"copyrights\":\"Map data ©2024 Google, Mapa GISrael\",\"fare\":null,\"warnings\":[\"הוראות ההליכה הן בגרסת הבטא. חשוב לשים לב – ייתכן שבמסלול זה חסרים נתיבים להולכי רגל או מדרכות.\"]}]}, {\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJj8G3lJpLHRURHtzRkXs69w0\",\"types\":[\"ESTABLISHMENT\",\"PARKING\",\"POINT_OF_INTEREST\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJ38yR5YVLHRURVv83pjGg3hQ\",\"types\":[\"STREET_ADDRESS\"]}],\"routes\":[{\"summary\":\"שדרות דוד המלך\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו בכיוון <b>צפונה</b> על <b>רבקה זיו</b> לעבר <b>צייטלין</b>\",\"distance\":{\"inMeters\":198,\"humanReadable\":\"0.2 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":161,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.07815,\"lng\":34.786781},\"endLocation\":{\"lat\":32.079914,\"lng\":34.78680800000001},\"steps\":null,\"polyline\":{\"encodedPath\":\"mgxbEkhisE[FODQ@S@e@?W?m@COAqCQ\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>שדרות דוד המלך</b>\",\"distance\":{\"inMeters\":529,\"humanReadable\":\"0.5 km\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":436,\"humanReadable\":\"7 mins\"},\"startLocation\":{\"lat\":32.079914,\"lng\":34.78680800000001},\"endLocation\":{\"lat\":32.080353,\"lng\":34.7812181},\"steps\":null,\"polyline\":{\"encodedPath\":\"mrxbEqhisEMjCC~AGzACj@WtHUjGG~AAl@AX\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>שלמה אבן גבירול</b>\",\"distance\":{\"inMeters\":9,\"humanReadable\":\"9 m\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":8,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.080353,\"lng\":34.7812181},\"endLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"steps\":null,\"polyline\":{\"encodedPath\":\"euxbEsehsEO?\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":56,\"humanReadable\":\"56 m\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":48,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"steps\":null,\"polyline\":{\"encodedPath\":\"uuxbEsehsE?h@?j@?`@\"},\"travelMode\":\"WALKING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":792,\"humanReadable\":\"0.8 km\"},\"duration\":{\"inSeconds\":653,\"humanReadable\":\"11 mins\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.07815,\"lng\":34.786781},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"startAddress\":\"ברקוביץ' 7, תל אביב-יפו, ישראל\",\"endAddress\":\"מלכי ישראל 500, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"mgxbEkhisEk@Le@B{BEqCQMjCKzDy@lUCfAO??h@?lA\"},\"bounds\":{\"northeast\":{\"lat\":32.0804313,\"lng\":34.78680800000001},\"southwest\":{\"lat\":32.07815,\"lng\":34.78062}},\"copyrights\":\"Map data ©2024 Google, Mapa GISrael\",\"fare\":null,\"warnings\":[\"הוראות ההליכה הן בגרסת הבטא. חשוב לשים לב – ייתכן שבמסלול זה חסרים נתיבים להולכי רגל או מדרכות.\"]}]}, {\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJBY70aoNLHRURb8xzWhm_YCA\",\"types\":[\"ESTABLISHMENT\",\"POINT_OF_INTEREST\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJ38yR5YVLHRURVv83pjGg3hQ\",\"types\":[\"STREET_ADDRESS\"]}],\"routes\":[{\"summary\":\"שלמה אבן גבירול\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו בכיוון <b>צפונה</b> על <b>דובנוב</b> לעבר <b>שדרות שאול המלך</b>\",\"distance\":{\"inMeters\":146,\"humanReadable\":\"0.1 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":115,\"humanReadable\":\"2 דקות\"},\"startLocation\":{\"lat\":32.0742408,\"lng\":34.7836511},\"endLocation\":{\"lat\":32.0755534,\"lng\":34.7835405},\"steps\":null,\"polyline\":{\"encodedPath\":\"_owbEythsEm@Bs@@q@B_@BY@w@D\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>שדרות שאול המלך</b>\",\"distance\":{\"inMeters\":182,\"humanReadable\":\"0.2 ק\\\"מ\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":167,\"humanReadable\":\"3 דקות\"},\"startLocation\":{\"lat\":32.0755534,\"lng\":34.7835405},\"endLocation\":{\"lat\":32.0755221,\"lng\":34.7816115},\"steps\":null,\"polyline\":{\"encodedPath\":\"ewwbEcthsE?N?D@bB?pA@xA@JAP@d@?V\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>שלמה אבן גבירול</b>\",\"distance\":{\"inMeters\":548,\"humanReadable\":\"0.5 ק\\\"מ\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":465,\"humanReadable\":\"8 דקות\"},\"startLocation\":{\"lat\":32.0755221,\"lng\":34.7816115},\"endLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"steps\":null,\"polyline\":{\"encodedPath\":\"_wwbEahhsEQ?aBTYBeE^aAJW?_@@_A?}@?Q?wD?Q@q@?kBBO?\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":56,\"humanReadable\":\"56 מ'\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":48,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"steps\":null,\"polyline\":{\"encodedPath\":\"uuxbEsehsE?h@?j@?`@\"},\"travelMode\":\"WALKING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":932,\"humanReadable\":\"0.9 ק\\\"מ\"},\"duration\":{\"inSeconds\":795,\"humanReadable\":\"13 דקות\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.0742408,\"lng\":34.7836511},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"startAddress\":\"דובנוב 4, תל אביב-יפו, ישראל\",\"endAddress\":\"מלכי ישראל 500, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"_owbEythsEsDLqAF?TDzG?v@?VQ?{BXgGj@uD@mG@{BB?tA?`@\"},\"bounds\":{\"northeast\":{\"lat\":32.0804313,\"lng\":34.7836511},\"southwest\":{\"lat\":32.0742408,\"lng\":34.78062}},\"copyrights\":\"Map data ©2024 Google, Mapa GISrael\",\"fare\":null,\"warnings\":[\"הוראות ההליכה הן בגרסת הבטא. חשוב לשים לב – ייתכן שבמסלול זה חסרים נתיבים להולכי רגל או מדרכות.\"]}]}, {\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJhYaKaINLHRURRMIT2a6LAHM\",\"types\":[\"ESTABLISHMENT\",\"PARKING\",\"POINT_OF_INTEREST\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJ38yR5YVLHRURVv83pjGg3hQ\",\"types\":[\"STREET_ADDRESS\"]}],\"routes\":[{\"summary\":\"שלמה אבן גבירול\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו בכיוון <b>מזרח</b> אל <b>דובנוב</b>\",\"distance\":{\"inMeters\":48,\"humanReadable\":\"48 m\"},\"maneuver\":null,\"duration\":{\"inSeconds\":39,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0740205,\"lng\":34.78379990000001},\"endLocation\":{\"lat\":32.0740503,\"lng\":34.7843048},\"steps\":null,\"polyline\":{\"encodedPath\":\"smwbEwuhsEEcB\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> לכיוון <b>דובנוב</b>\",\"distance\":{\"inMeters\":71,\"humanReadable\":\"71 m\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":58,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0740503,\"lng\":34.7843048},\"endLocation\":{\"lat\":32.0741642,\"lng\":34.7836566},\"steps\":null,\"polyline\":{\"encodedPath\":\"ymwbE{xhsEE?E@GBA@CDABAD?J@ZD~@\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>דובנוב</b>\",\"distance\":{\"inMeters\":155,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":123,\"humanReadable\":\"2 mins\"},\"startLocation\":{\"lat\":32.0741642,\"lng\":34.7836566},\"endLocation\":{\"lat\":32.0755534,\"lng\":34.7835405},\"steps\":null,\"polyline\":{\"encodedPath\":\"onwbE{thsE}@Ds@@q@B_@BY@w@D\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>שדרות שאול המלך</b>\",\"distance\":{\"inMeters\":182,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":167,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.0755534,\"lng\":34.7835405},\"endLocation\":{\"lat\":32.0755221,\"lng\":34.7816115},\"steps\":null,\"polyline\":{\"encodedPath\":\"ewwbEcthsE?N?D@bB?pA@xA@JAP@d@?V\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> אל <b>שלמה אבן גבירול</b>\",\"distance\":{\"inMeters\":548,\"humanReadable\":\"0.5 km\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":465,\"humanReadable\":\"8 mins\"},\"startLocation\":{\"lat\":32.0755221,\"lng\":34.7816115},\"endLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"steps\":null,\"polyline\":{\"encodedPath\":\"_wwbEahhsEQ?aBTYBeE^aAJW?_@@_A?}@?Q?wD?Q@q@?kBBO?\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":56,\"humanReadable\":\"56 m\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":48,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"steps\":null,\"polyline\":{\"encodedPath\":\"uuxbEsehsE?h@?j@?`@\"},\"travelMode\":\"WALKING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":1060,\"humanReadable\":\"1.1 km\"},\"duration\":{\"inSeconds\":900,\"humanReadable\":\"15 mins\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.0740205,\"lng\":34.78379990000001},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"startAddress\":\"דובנוב 4, תל אביב-יפו, ישראל\",\"endAddress\":\"מלכי ישראל 500, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"smwbEwuhsEEcBE?MDEFCH@f@D~@}@DeBDy@Dw@D?N@hB@hE@|@sBT_Fb@yAJoD@gJDO??h@?lA\"},\"bounds\":{\"northeast\":{\"lat\":32.0804313,\"lng\":34.7843048},\"southwest\":{\"lat\":32.0740205,\"lng\":34.78062}},\"copyrights\":\"Map data ©2024 Google, Mapa GISrael\",\"fare\":null,\"warnings\":[\"הוראות ההליכה הן בגרסת הבטא. חשוב לשים לב – ייתכן שבמסלול זה חסרים נתיבים להולכי רגל או מדרכות.\"]}]}]", DirectionsResult[].class);

        for (int i = 0; i < parkingLots.length; i++) {
            doReturn(serializedDrivingDirectionsResults[i]).when(routePlannerService).getDirections(
                    eq(originLatLng),
                    eq(parkingLots[i].geometry.location),
                    eq(TravelMode.DRIVING));
            doReturn(serializedWalkingDirectionsResults[i]).when(routePlannerService).getDirections(
                    eq(parkingLots[i].geometry.location),
                    eq(destinationLatLng),
                    eq(TravelMode.WALKING));
        }

        // Act
        List<Route> routes = routePlannerService.findRoutes("כפר סבא", "כיכר רבין, תל אביב");

        //Assert
        assertNotNull(routes);
        assertEquals(3, routes.size());
        assertEquals("גולדה", routes.get(0).getParkingLot().getName());
        assertEquals("רמז-ארלוזורוב", routes.get(1).getParkingLot().getName());
        assertEquals("דובנוב", routes.get(2).getParkingLot().getName());
        Mockito.framework().clearInlineMocks();
    }

    @Test
    public void findRoutes_IsThrowingExceptionIfMissingValidParameter() {
        assertThrows(IllegalArgumentException.class, () -> {
            routePlannerService.findRoutes("Tel Aviv", null);
        });
        assertThrows(IllegalArgumentException.class, () -> {
            routePlannerService.findRoutes("Tel Aviv", "");
        });
    }

    @Test
    public void findRoutes_isThrowingExceptionIfGoogleApiUnavailable() throws IOException, InterruptedException, ApiException {
        // Arrange
        var placesApiMock = mockStatic(PlacesApi.class);

        String origin = "כפר סבא";
        String destination = "כיכר רבין, תל אביב";

        LatLng originLatLng = objectMapper.readValue("{\"lat\":32.178195,\"lng\":34.90761}", LatLng.class);
        LatLng destinationLatLng = objectMapper.readValue("{\"lat\":32.0804846,\"lng\":34.7806198}}", LatLng.class);

        doReturn(originLatLng).when(routePlannerService).getLocationFromAddress(eq(origin));
        doReturn(destinationLatLng).when(routePlannerService).getLocationFromAddress(eq(destination));

        placesApiMock.when(() -> PlacesApi.nearbySearchQuery(
                any(GeoApiContext.class),
                eq(destinationLatLng))
        ).thenReturn(nearbySearchRequest);
        when(nearbySearchRequest.radius(eq(500))).thenReturn(nearbySearchRequest);
        when(nearbySearchRequest.keyword(eq("אחוזות החוף"))).thenReturn(nearbySearchRequest);
        when(nearbySearchRequest.language(eq("he"))).thenReturn(nearbySearchRequest);
        when(nearbySearchRequest.await()).thenThrow(IOException.class);

        // Act & Assert
        ResourceAccessException thrown = assertThrows(
                ResourceAccessException.class,
                () -> routePlannerService.findRoutes("כפר סבא", "כיכר רבין, תל אביב"),
                "Expected to throw Google Maps API error, but it didnt");

        assertSame("Google Maps API error", thrown.getMessage());
        Mockito.framework().clearInlineMocks();
    }

    @Test
    public void findRoutes_isThrowingExceptionIfAddressNotExists() throws IOException, InterruptedException, ApiException {
        // Arrange
        var geocodingApiMock = mockStatic(GeocodingApi.class);
        geocodingApiMock.when(() -> GeocodingApi.geocode(any(GeoApiContext.class), any()))
                .thenThrow(IllegalArgumentException.class);

        // Act & Assert
        IllegalArgumentException thrown = assertThrows(
                IllegalArgumentException.class,
                () -> routePlannerService.findRoutes("כפר סבא", "אבגדabcd"),
                "Expected to throw Address does not exist, but it didnt");
        Mockito.framework().clearInlineMocks();
    }

    @Test
    public void getLocationFromAddress_isThrowingExceptionIfAddressNotExists() throws IOException, InterruptedException, ApiException {
        // Arrange
        var geocodingApiMock = mockStatic(GeocodingApi.class);
        geocodingApiMock.when(() -> GeocodingApi.geocode(any(GeoApiContext.class), any()))
                .thenThrow(IllegalArgumentException.class);

        // Act & Assert
        IllegalArgumentException thrown = assertThrows(
                IllegalArgumentException.class,
                () -> routePlannerService.getLocationFromAddress("אבגדabcd"),
                "Expected to throw Address does not exist, but it didnt");
        Mockito.framework().clearInlineMocks();
    }

    @Test
    public void getLocationFromAddress_isThrowingExceptionIfGoogleApiUnavailable() throws IOException, InterruptedException, ApiException {
        // Arrange
        var geocodingApiMock = mockStatic(GeocodingApi.class);
        geocodingApiMock.when(() -> GeocodingApi.geocode(any(GeoApiContext.class), any()))
                .thenThrow(ResourceAccessException.class);

        // Act & Assert
        ResourceAccessException thrown = assertThrows(
                ResourceAccessException.class,
                () -> routePlannerService.getLocationFromAddress("כפר סבא"),
                "Expected to throw Google Maps API error, but it didnt");
        Mockito.framework().clearInlineMocks();
    }

    @Test
    public void getNearbyParkingLots_isThrowingExceptionIfGoogleApiUnavailable() throws IOException, InterruptedException, ApiException {
        // Arrange
        var placesApiMock = mockStatic(PlacesApi.class);

        LatLng destinationLatLng = objectMapper.readValue("{\"lat\":32.0804846,\"lng\":34.7806198}}", LatLng.class);
        placesApiMock.when(() -> PlacesApi.nearbySearchQuery(any(GeoApiContext.class), eq(destinationLatLng)))
                .thenThrow(ResourceAccessException.class);

        // Act & Assert
        ResourceAccessException thrown = assertThrows(
                ResourceAccessException.class,
                () -> routePlannerService.getNearbyParkingLots(destinationLatLng, 500),
                "Expected to throw Google Maps API error, but it didnt");
        Mockito.framework().clearInlineMocks();
    }


    @Test
    public void getDirections_isThrowingExceptionIfGoogleApiUnavailable() throws IOException, InterruptedException, ApiException {
        // Arrange
        LatLng originLatLng = objectMapper.readValue("{\"lat\":32.178195,\"lng\":34.90761}", LatLng.class);
        LatLng destinationLatLng = objectMapper.readValue("{\"lat\":32.0804846,\"lng\":34.7806198}}", LatLng.class);

        var directionsApiMock = mockStatic(DirectionsApi.class);
        directionsApiMock.when(() -> DirectionsApi.newRequest(any(GeoApiContext.class)))
                .thenThrow(ResourceAccessException.class);

        // Act & Assert
        ResourceAccessException thrown = assertThrows(
                ResourceAccessException.class,
                () -> routePlannerService.getDirections(originLatLng, destinationLatLng, TravelMode.DRIVING),
                "Expected to throw Google Maps API error, but it didnt");
        Mockito.framework().clearInlineMocks();
    }

    @Test
    public void createDrivingPath_isThrowingExceptionIfGoogleApiUnavailable() throws IOException, InterruptedException, ApiException {
        // Arrange
        LatLng originLatLng = objectMapper.readValue("{\"lat\":32.178195,\"lng\":34.90761}", LatLng.class);
        PlacesSearchResult parkingLotResult = objectMapper.readValue("{\"formattedAddress\":null,\"geometry\":{\"bounds\":null,\"location\":{\"lat\":32.0776703,\"lng\":34.7857861},\"locationType\":null,\"viewport\":{\"northeast\":{\"lat\":32.07908227989272,\"lng\":34.78710917989272},\"southwest\":{\"lat\":32.07638262010728,\"lng\":34.78440952010727}}},\"name\":\"Golda Parking Garage\",\"icon\":\"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/parking-71.png\",\"placeId\":\"ChIJq8gQ0JpLHRURtn54tq5dprc\",\"scope\":\"GOOGLE\",\"rating\":3.7,\"types\":[\"parking\",\"point_of_interest\",\"establishment\"],\"openingHours\":{\"openNow\":true,\"periods\":null,\"weekdayText\":null,\"permanentlyClosed\":null},\"photos\":[{\"photoReference\":\"AUc7tXX4P-m5MvKMEvAOy01GrsvFZ2fZqfjG5yBjjWYsDfhMARtcnvN3QedvjWLoh1X6Zkd246nrBkaua80bnX1MVkbgUcYWNIs8Vuw35J7ZFQoYCmfWwtvo9JC9UoBWmOl5k_RniuXD3F53Aljp7RYjC8srmGx3Wf1qOYTox7pPwkBIRm9b\",\"height\":3024,\"width\":4032,\"htmlAttributions\":[\"<a href=\\\"https://maps.google.com/maps/contrib/109325962305514141049\\\">A Google User</a>\"]}],\"vicinity\":\"Berkovitch St, Tel Aviv-Yafo\",\"permanentlyClosed\":false,\"userRatingsTotal\":148,\"businessStatus\":\"OPERATIONAL\"}", PlacesSearchResult.class);
        LatLng parkingLotLocationLatLng = parkingLotResult.geometry.location;

        var directionsApiMock = mockStatic(DirectionsApi.class);

        directionsApiMock.when(() -> DirectionsApi.newRequest(any(GeoApiContext.class)))
                .thenThrow(ResourceAccessException.class);

        // Act & Assert
        ResourceAccessException thrown = assertThrows(
                ResourceAccessException.class,
                () -> routePlannerService.createDrivingPath(parkingLotLocationLatLng, originLatLng),
                "Expected to throw Google Maps API error, but it didnt");
        Mockito.framework().clearInlineMocks();
    }

    @Test
    public void createWalkingPath_isThrowingExceptionIfGoogleApiUnavailable() throws IOException, InterruptedException, ApiException {
        // Arrange
        LatLng originLatLng = objectMapper.readValue("{\"lat\":32.178195,\"lng\":34.90761}", LatLng.class);
        PlacesSearchResult parkingLotResult = objectMapper.readValue("{\"formattedAddress\":null,\"geometry\":{\"bounds\":null,\"location\":{\"lat\":32.0776703,\"lng\":34.7857861},\"locationType\":null,\"viewport\":{\"northeast\":{\"lat\":32.07908227989272,\"lng\":34.78710917989272},\"southwest\":{\"lat\":32.07638262010728,\"lng\":34.78440952010727}}},\"name\":\"Golda Parking Garage\",\"icon\":\"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/parking-71.png\",\"placeId\":\"ChIJq8gQ0JpLHRURtn54tq5dprc\",\"scope\":\"GOOGLE\",\"rating\":3.7,\"types\":[\"parking\",\"point_of_interest\",\"establishment\"],\"openingHours\":{\"openNow\":true,\"periods\":null,\"weekdayText\":null,\"permanentlyClosed\":null},\"photos\":[{\"photoReference\":\"AUc7tXX4P-m5MvKMEvAOy01GrsvFZ2fZqfjG5yBjjWYsDfhMARtcnvN3QedvjWLoh1X6Zkd246nrBkaua80bnX1MVkbgUcYWNIs8Vuw35J7ZFQoYCmfWwtvo9JC9UoBWmOl5k_RniuXD3F53Aljp7RYjC8srmGx3Wf1qOYTox7pPwkBIRm9b\",\"height\":3024,\"width\":4032,\"htmlAttributions\":[\"<a href=\\\"https://maps.google.com/maps/contrib/109325962305514141049\\\">A Google User</a>\"]}],\"vicinity\":\"Berkovitch St, Tel Aviv-Yafo\",\"permanentlyClosed\":false,\"userRatingsTotal\":148,\"businessStatus\":\"OPERATIONAL\"}", PlacesSearchResult.class);
        LatLng parkingLotLocationLatLng = parkingLotResult.geometry.location;

        var directionsApiMock = mockStatic(DirectionsApi.class);

        directionsApiMock.when(() -> DirectionsApi.newRequest(any(GeoApiContext.class)))
                .thenThrow(ResourceAccessException.class);

        // Act & Assert
        ResourceAccessException thrown = assertThrows(
                ResourceAccessException.class,
                () -> routePlannerService.createWalkingPath(parkingLotLocationLatLng, originLatLng),
                "Expected to throw Google Maps API error, but it didnt");
        Mockito.framework().clearInlineMocks();
    }

    @Test
    public void createDrivingPath_IsDrivingPathValid() throws IOException, InterruptedException, ApiException {
        // Arrange
        DirectionsResult drivingDirectionsResult = objectMapper.readValue("{\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJm_SUkxI5HRURI7g_eQaOawg\",\"types\":[\"ESTABLISHMENT\",\"POINT_OF_INTEREST\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJEw6XEJJLHRURKt2lRMd6y_w\",\"types\":[\"STREET_ADDRESS\"]}],\"routes\":[{\"summary\":\"כביש 531 ונתיבי איילון/כביש 20\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו <b>מערב</b> על <b>הכרמל</b> לכיוון <b>ארבל</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":417,\"humanReadable\":\"0.4 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":64,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"steps\":null,\"polyline\":{\"encodedPath\":\"azkcE_|`tEMz@]vBA?A?A?A??@A??@A??@?@?@A??@@??@?@?@@??@@??@@?[zBIf@ALADGh@Gh@Ej@AL?V?@Bf@Bj@@J@N@XIr@Eh@AHSp@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"בכיכר, צאו ביציאה ה<b>שלישית</b> אל <b>ברל כצנלסון</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":297,\"humanReadable\":\"0.3 km\"},\"maneuver\":\"roundabout-right\",\"duration\":{\"inSeconds\":63,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"endLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"steps\":null,\"polyline\":{\"encodedPath\":\"m~kcEqa`tEA?C@CBA??@A@?@?@?@A@?@@@?@?BBB@BB@D?B?BA@C~B^?BBD@@D@B@@A@?@??A@?@A?AhH|A\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>סוקולוב</b>\",\"distance\":{\"inMeters\":639,\"humanReadable\":\"0.6 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"endLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"steps\":null,\"polyline\":{\"encodedPath\":\"}okcEk|_tE\\\\DR@nBRR?f@HtBb@^JrAXfCf@d@HnB^vAZj@LXFVHHBlBd@NFHDPDZ@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> ליציאה אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":209,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":25,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"endLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"steps\":null,\"polyline\":{\"encodedPath\":\"amjcEmr_tEV^DJBFB`@UvAADK^[xAKb@SfA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנייה קלה <b>שמאלה</b> כדי להתמזג אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":4231,\"humanReadable\":\"4.2 km\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"endLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"steps\":null,\"polyline\":{\"encodedPath\":\"{njcEse_tE?BK~C[tAQ~@OfAg@tEUpB_@bDCVCPMvA[bDCTSbCGhAGfAIpCCzC@hENvHF|B@r@D`BBt@NbJ@L@h@?B@LHlDFrCB`C@|B@hB@R?h@@h@B~B?X?N?j@?tH?R?DADADKNArBAtA?b@?h@A^@~A?DBdA?FNxDT`EHjCBh@Bj@H|B?FFhE@j@@j@BjCAbA?BA~@C|@Ch@Cj@ATCRQfBSzAAHIf@Kh@o@nBs@`CYx@Q`@w@dBm@bAeA~AEFoKbNgApAW`@U^k@|@ABeAxB[v@GPu@rBg@fBWbA\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"היצמדו ל<b>שמאל</b> כדי להישאר על <b>כביש 531</b>\",\"distance\":{\"inMeters\":2391,\"humanReadable\":\"2.4 km\"},\"maneuver\":\"keep-left\",\"duration\":{\"inSeconds\":83,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"endLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"steps\":null,\"polyline\":{\"encodedPath\":\"uwkcEs|vsE_ChJqArEMd@Of@Md@k@rBOf@WbAUl@IPGRABELoAlEq@`B_BxDs@zAm@bA_AnB}@|Aa@v@iBlC_BxBoB~BaBhBy@|@oE~E_@`@}BhC_AfAoDzDYZs@x@EBgBhBgChCc@b@sErE?@yCrC\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה מ<b>שמאל</b> אל <b>נתיבי איילון</b>/<wbr/><b>כביש 20</b>\",\"distance\":{\"inMeters\":12630,\"humanReadable\":\"12.6 km\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":521,\"humanReadable\":\"9 mins\"},\"startLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"endLocation\":{\"lat\":32.0925303,\"lng\":34.8007134},\"steps\":null,\"polyline\":{\"encodedPath\":\"ekncEocssESn@{BfCA@WX_DlDi@j@_AdA[^iAxAU^CBQ\\\\ABO^EJKXENKl@Ep@Cr@?j@?FBx@F|@Hr@FZDVDNDRFRBJJV@BN\\\\@@PZBDPVDFNPHHNNLHNLLHLFb@TLFTH\\\\J^Hb@FP@J@VBjCNdCNpD`@lGbA|ItAdDp@jCh@~@TXHbAXLDRF`@L`@ND@ZJjAd@VJ^N`Br@`@PbBt@hJ|DdDtAj@V^NJDTJTJ`@N^P^PbCbArMrFbC`ALFtAl@^N`Ab@nAh@xGpC^NfH~C^NhChAtAl@vIpDTJdBr@hCz@ZJ`Ct@f@L`@LxAb@l@N`@JrA^~D`AD?fDx@l@NTFb@JtAZNDb@LdBf@`@LfCt@`@LlDbA|DfAh@JZHzA^b@JzFtArFtAjEjApEtArSnFnCr@zItBnEhArEx@`CVvEXB?xCB`@?jEAjDCdDE|GIzDEtBEhE?J?p@AN?J?N@H?D@D@B@x^In@AxLUzJSjEB|FEhMM~BAjGCrJE~G@|DVtC`@zDbA~Ab@lB~@xJbGpAr@nBlA~CjBbFxCrLhH`DfB`DhBDBD@RJRHXL`@LxBl@nCd@H@ZFJDf@JNBNBPBPB^DVBX@z@LjS|C|C`@jLbB\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה לעבר <b>פנחס ספיר</b>\",\"distance\":{\"inMeters\":427,\"humanReadable\":\"0.4 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":33,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0925303,\"lng\":34.8007134},\"endLocation\":{\"lat\":32.0891697,\"lng\":34.7990064},\"steps\":null,\"polyline\":{\"encodedPath\":\"ia{bEm_lsEv@b@t@PJB`@Hb@FVDl@JdAPb@HdANl@N`@Hb@HNFRLFB@BHFRVHPBDFJFP?@BHFd@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו פנייה קלה <b>ימינה</b> כדי להתמזג אל <b>פנחס ספיר</b>\",\"distance\":{\"inMeters\":198,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":50,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0891697,\"lng\":34.7990064},\"endLocation\":{\"lat\":32.090575,\"lng\":34.798477},\"steps\":null,\"polyline\":{\"encodedPath\":\"ilzbEytksEKr@EPCJGLKTm@Nk@HI?q@A_@IKCm@U\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>גשר ההלכה</b>\",\"distance\":{\"inMeters\":329,\"humanReadable\":\"0.3 km\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":72,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.090575,\"lng\":34.798477},\"endLocation\":{\"lat\":32.091274,\"lng\":34.795347},\"steps\":null,\"polyline\":{\"encodedPath\":\"cuzbEoqksEYOITMd@YrAQhAGh@CREh@Eh@Eh@?@Ef@Ch@Er@?V?P?B?Z?H@N\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>פנקס</b>\",\"distance\":{\"inMeters\":828,\"humanReadable\":\"0.8 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":164,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.091274,\"lng\":34.795347},\"endLocation\":{\"lat\":32.09097,\"lng\":34.786569},\"steps\":null,\"polyline\":{\"encodedPath\":\"myzbE}}jsE?`@?h@?Z?R?h@Ah@?`@?H@lCBfBBnAFdB@h@JvBDn@@t@?H@H?LDfD@bA@rA?`@@P@`C@tA?H@lA@dB\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>רחוב דוד רמז</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":644,\"humanReadable\":\"0.6 km\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":157,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.09097,\"lng\":34.786569},\"endLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"steps\":null,\"polyline\":{\"encodedPath\":\"qwzbEagisEH?F?fA@hA?nCNjCNzBT`AHz@HRB~@FhAFrBNx@D^BjAHL@\"},\"travelMode\":\"DRIVING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":23240,\"humanReadable\":\"23.2 km\"},\"duration\":{\"inSeconds\":1550,\"humanReadable\":\"26 mins\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"startAddress\":\"0, כפר סבא, ישראל\",\"endAddress\":\"רחוב דוד רמז 1, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"azkcE_|`tEm@rDA?A?EB@N@@@?i@vDWlCFlBDt@O|AUz@KDAB?D?D?@HLH?DE~B^?BDFJ@@?BA@A?AfIbBbCTR?f@HtCn@zE`AxGrAhDz@XLl@F\\\\j@Fh@W|Ag@xB_@jBKbDm@tCw@|G}@~HaAtKOpCIpCCzC@hENvHHpDZhOLhFJtGBfFFfF?jKCd@KNArBAxB?nDBlAd@zJZ~IJhH@nEAbAMhDk@`FUpAcBpFk@zAw@dBm@bAkAfBwMtP{AbCaBpD}@dC_AjD_ChJqArE]lAy@xCg@jB_@~@_BrFqCzGs@zAm@bA}BlEkCdE_BxBoB~B{CfDmLrMcGtGgNjNyCtCSn@{BfCYZiExE{AdB_BxBg@dAQd@Q|@IdB?r@JvBPnAXnA`@dAh@z@n@r@x@h@p@\\\\r@T`BTbDRdCNpD`@jRxCpHzAjD~@|Af@~ClApQxHjJ|DzVjKdEhBpTjJvQxHzB~@dDfAdHtBtQnElDz@pHxBjJjCdAT~Bj@nNjDjEjApEtAbXbHjP~DrEx@`CVzEXzDBvJEbMOpHKtE?|A?XDh`@KtXi@jEB|FEhQO~RI~G@|DVtC`@zDbA~Ab@lB~@jMvHnGxDvSbMbIpEr@Zz@ZxBl@nCd@d@Hr@PbANv@HtANhX~DjLbBv@b@`ATdAPnDl@xDr@l@\\\\\\\\^LVRh@Fd@Kr@I\\\\Sb@m@Nk@H{@Ak@MgAe@Wz@YrAQhAK|@Q~BO|C@rDAhCD~Fb@pMHlIDjG@vA@dBH?nA@hA?nCNjCNzBT|BRpGb@rDT\"},\"bounds\":{\"northeast\":{\"lat\":32.1946203,\"lng\":34.9076796},\"southwest\":{\"lat\":32.0852113,\"lng\":34.7858994}},\"copyrights\":\"Map data ©2024 Mapa GISrael\",\"fare\":null,\"warnings\":[]}]}", DirectionsResult.class);

        LatLng originLatLng = new LatLng(32.17819500, 34.90761000);
        LatLng parkingLotLocationLatLng = new LatLng(32.07767030, 34.78578610);

        doReturn(drivingDirectionsResult).when(routePlannerService).getDirections(
                eq(originLatLng),
                eq(parkingLotLocationLatLng),
                eq(TravelMode.DRIVING));

        String drivingPathDirectionsRouteSerialized = "{\"summary\":\"כביש 531 ונתיבי איילון/כביש 20\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו <b>מערב</b> על <b>הכרמל</b> לכיוון <b>ארבל</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":417,\"humanReadable\":\"0.4 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":64,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"בכיכר, צאו ביציאה ה<b>שלישית</b> אל <b>ברל כצנלסון</b><div style=\\\"font-size:0.9em\\\">עברו בכיכר אחת</div>\",\"distance\":{\"inMeters\":297,\"humanReadable\":\"0.3 km\"},\"maneuver\":\"roundabout-right\",\"duration\":{\"inSeconds\":63,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1791124,\"lng\":34.903453},\"endLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>סוקולוב</b>\",\"distance\":{\"inMeters\":639,\"humanReadable\":\"0.6 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.1767896,\"lng\":34.9026238},\"endLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b> ליציאה אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":209,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":25,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1712131,\"lng\":34.9010282},\"endLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנייה קלה <b>שמאלה</b> כדי להתמזג אל <b>כביש 531</b>\",\"distance\":{\"inMeters\":4231,\"humanReadable\":\"4.2 km\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":159,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.1714956,\"lng\":34.8989832},\"endLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"היצמדו ל<b>שמאל</b> כדי להישאר על <b>כביש 531</b>\",\"distance\":{\"inMeters\":2391,\"humanReadable\":\"2.4 km\"},\"maneuver\":\"keep-left\",\"duration\":{\"inSeconds\":83,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.1780308,\"lng\":34.8565805},\"endLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה מ<b>שמאל</b> אל <b>נתיבי איילון</b>/<wbr/><b>כביש 20</b>\",\"distance\":{\"inMeters\":12630,\"humanReadable\":\"12.6 km\"},\"maneuver\":\"ramp-left\",\"duration\":{\"inSeconds\":521,\"humanReadable\":\"9 mins\"},\"startLocation\":{\"lat\":32.191386,\"lng\":34.8372045},\"endLocation\":{\"lat\":32.0925303,\"lng\":34.8007134},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"צאו ביציאה לעבר <b>פנחס ספיר</b>\",\"distance\":{\"inMeters\":427,\"humanReadable\":\"0.4 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":33,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0925303,\"lng\":34.8007134},\"endLocation\":{\"lat\":32.0891697,\"lng\":34.7990064},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו פנייה קלה <b>ימינה</b> כדי להתמזג אל <b>פנחס ספיר</b>\",\"distance\":{\"inMeters\":198,\"humanReadable\":\"0.2 km\"},\"maneuver\":\"ramp-right\",\"duration\":{\"inSeconds\":50,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.0891697,\"lng\":34.7990064},\"endLocation\":{\"lat\":32.090575,\"lng\":34.798477},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>גשר ההלכה</b>\",\"distance\":{\"inMeters\":329,\"humanReadable\":\"0.3 km\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":72,\"humanReadable\":\"1 min\"},\"startLocation\":{\"lat\":32.090575,\"lng\":34.798477},\"endLocation\":{\"lat\":32.091274,\"lng\":34.795347},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>פנקס</b>\",\"distance\":{\"inMeters\":828,\"humanReadable\":\"0.8 km\"},\"maneuver\":null,\"duration\":{\"inSeconds\":164,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.091274,\"lng\":34.795347},\"endLocation\":{\"lat\":32.09097,\"lng\":34.786569},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>רחוב דוד רמז</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":644,\"humanReadable\":\"0.6 km\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":157,\"humanReadable\":\"3 mins\"},\"startLocation\":{\"lat\":32.09097,\"lng\":34.786569},\"endLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"DRIVING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":23240,\"humanReadable\":\"23.2 km\"},\"duration\":{\"inSeconds\":1550,\"humanReadable\":\"26 mins\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.1784142,\"lng\":34.9076796},\"endLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"startAddress\":\"0, כפר סבא, ישראל\",\"endAddress\":\"רחוב דוד רמז 1, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":null},\"bounds\":{\"northeast\":{\"lat\":32.1946203,\"lng\":34.9076796},\"southwest\":{\"lat\":32.0852113,\"lng\":34.7858994}},\"copyrights\":\"Map data ©2024 Mapa GISrael\",\"fare\":null,\"warnings\":[]}";

        // Act
        DrivingPath drivingPath = routePlannerService.createDrivingPath(parkingLotLocationLatLng, originLatLng);
        //Assert
        assertNotNull(drivingPath.getDirectionsRoute());
        assertEquals(objectMapper.writeValueAsString(drivingPath.getDirectionsRoute()),drivingPathDirectionsRouteSerialized);
        assertEquals(drivingPath.getTotalTime(), 25);
    }

    @Test
    public void createWalkingPath_IsWalkingPathValid() throws IOException, InterruptedException, ApiException {
        // Arrange
        DirectionsResult walkingDirectionsResult = objectMapper.readValue("{\"geocodedWaypoints\":[{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJEw6XEJJLHRURKt2lRMd6y_w\",\"types\":[\"STREET_ADDRESS\"]},{\"geocoderStatus\":\"OK\",\"partialMatch\":false,\"placeId\":\"ChIJ38yR5YVLHRURVv83pjGg3hQ\",\"types\":[\"STREET_ADDRESS\"]}],\"routes\":[{\"summary\":\"בלוך\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו בכיוון <b>דרום</b> על <b>רחוב דוד רמז</b> לעבר <b>ארלוזורוב</b>\",\"distance\":{\"inMeters\":90,\"humanReadable\":\"90 מ'\"},\"maneuver\":null,\"duration\":{\"inSeconds\":78,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"endLocation\":{\"lat\":32.0844217,\"lng\":34.7857132},\"steps\":null,\"polyline\":{\"encodedPath\":\"qsybE{bisE@?n@Hv@Lb@FND\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>בלוך</b>\",\"distance\":{\"inMeters\":555,\"humanReadable\":\"0.6 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":461,\"humanReadable\":\"8 דקות\"},\"startLocation\":{\"lat\":32.0844217,\"lng\":34.7857132},\"endLocation\":{\"lat\":32.08149350000001,\"lng\":34.7812396},\"steps\":null,\"polyline\":{\"encodedPath\":\"snybEuaisE\\\\LZNZR`@ZlEbGnCtDPTl@pADJPr@Jh@HbAAr@FT?T\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>שלמה אבן גבירול</b>\",\"distance\":{\"inMeters\":118,\"humanReadable\":\"0.1 ק\\\"מ\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":103,\"humanReadable\":\"2 דקות\"},\"startLocation\":{\"lat\":32.08149350000001,\"lng\":34.7812396},\"endLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"steps\":null,\"polyline\":{\"encodedPath\":\"i|xbEwehsEP?`A@T?hB@\"},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":56,\"humanReadable\":\"56 מ'\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":48,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"steps\":null,\"polyline\":{\"encodedPath\":\"uuxbEsehsE?h@?j@?`@\"},\"travelMode\":\"WALKING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":819,\"humanReadable\":\"0.8 ק\\\"מ\"},\"duration\":{\"inSeconds\":690,\"humanReadable\":\"12 דקות\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"startAddress\":\"רחוב דוד רמז 1, תל אביב-יפו, ישראל\",\"endAddress\":\"מלכי ישראל 500, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":\"qsybE{bisElC^l@Rv@b@`@ZlEbG`DjEr@|A\\\\|AHbAAr@FT?TrA@~B@?vB\"},\"bounds\":{\"northeast\":{\"lat\":32.0852113,\"lng\":34.7858994},\"southwest\":{\"lat\":32.0804302,\"lng\":34.78062}},\"copyrights\":\"Map data ©2024 Google, Mapa GISrael\",\"fare\":null,\"warnings\":[\"הוראות ההליכה הן בגרסת הבטא. חשוב לשים לב – ייתכן שבמסלול זה חסרים נתיבים להולכי רגל או מדרכות.\"]}]}", DirectionsResult.class);
        LatLng destinationLocationLatLng = new LatLng(32.0804846, 34.7806198);
        LatLng parkingLotLocationLatLng = new LatLng(32.07767030, 34.78578610);

        doReturn(walkingDirectionsResult).when(routePlannerService).getDirections(
                eq(parkingLotLocationLatLng),
                eq(destinationLocationLatLng),
                eq(TravelMode.WALKING));

        String walkingPathDirectionsRouteSerialized = "{\"summary\":\"בלוך\",\"legs\":[{\"steps\":[{\"htmlInstructions\":\"התקדמו בכיוון <b>דרום</b> על <b>רחוב דוד רמז</b> לעבר <b>ארלוזורוב</b>\",\"distance\":{\"inMeters\":90,\"humanReadable\":\"90 מ'\"},\"maneuver\":null,\"duration\":{\"inSeconds\":78,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"endLocation\":{\"lat\":32.0844217,\"lng\":34.7857132},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"המשיכו אל <b>בלוך</b>\",\"distance\":{\"inMeters\":555,\"humanReadable\":\"0.6 ק\\\"מ\"},\"maneuver\":null,\"duration\":{\"inSeconds\":461,\"humanReadable\":\"8 דקות\"},\"startLocation\":{\"lat\":32.0844217,\"lng\":34.7857132},\"endLocation\":{\"lat\":32.08149350000001,\"lng\":34.7812396},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>שמאלה</b> אל <b>שלמה אבן גבירול</b>\",\"distance\":{\"inMeters\":118,\"humanReadable\":\"0.1 ק\\\"מ\"},\"maneuver\":\"turn-left\",\"duration\":{\"inSeconds\":103,\"humanReadable\":\"2 דקות\"},\"startLocation\":{\"lat\":32.08149350000001,\"lng\":34.7812396},\"endLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"WALKING\",\"transitDetails\":null},{\"htmlInstructions\":\"פנו <b>ימינה</b><div style=\\\"font-size:0.9em\\\">היעד יהיה מצד ימין</div>\",\"distance\":{\"inMeters\":56,\"humanReadable\":\"56 מ'\"},\"maneuver\":\"turn-right\",\"duration\":{\"inSeconds\":48,\"humanReadable\":\"1 דקות\"},\"startLocation\":{\"lat\":32.0804313,\"lng\":34.7812192},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"steps\":null,\"polyline\":{\"encodedPath\":null},\"travelMode\":\"WALKING\",\"transitDetails\":null}],\"distance\":{\"inMeters\":819,\"humanReadable\":\"0.8 ק\\\"מ\"},\"duration\":{\"inSeconds\":690,\"humanReadable\":\"12 דקות\"},\"durationInTraffic\":null,\"arrivalTime\":null,\"departureTime\":null,\"startLocation\":{\"lat\":32.0852113,\"lng\":34.7858994},\"endLocation\":{\"lat\":32.0804302,\"lng\":34.78062},\"startAddress\":\"רחוב דוד רמז 1, תל אביב-יפו, ישראל\",\"endAddress\":\"מלכי ישראל 500, תל אביב-יפו, ישראל\"}],\"waypointOrder\":[],\"overviewPolyline\":{\"encodedPath\":null},\"bounds\":{\"northeast\":{\"lat\":32.0852113,\"lng\":34.7858994},\"southwest\":{\"lat\":32.0804302,\"lng\":34.78062}},\"copyrights\":\"Map data ©2024 Google, Mapa GISrael\",\"fare\":null,\"warnings\":[\"הוראות ההליכה הן בגרסת הבטא. חשוב לשים לב – ייתכן שבמסלול זה חסרים נתיבים להולכי רגל או מדרכות.\"]}";

        // Act
        WalkingPath walkingPath = routePlannerService.createWalkingPath(parkingLotLocationLatLng, destinationLocationLatLng);
        //Assert
        assertNotNull(walkingPath.getDirectionsRoute());
        assertEquals(objectMapper.writeValueAsString(walkingPath.getDirectionsRoute()), walkingPathDirectionsRouteSerialized);
        assertEquals(walkingPath.getTotalTime(), 11);
    }


    @Test
    public void isInIsrael_isFalseIfNotInIsrael() {
        LatLng newYorkCity = new LatLng(40.7128, 74.0060);
        Assertions.assertFalse(RoutePlannerService.isInIsrael(newYorkCity));
    }

    @Test
    public void isInIsrael_sTrueIfInIsrael() {
        LatLng jerusalem = new LatLng(31.7683, 35.2137);
        Assertions.assertTrue(RoutePlannerService.isInIsrael(jerusalem));
    }

    @Test
    public void isInTelAviv_isFalseIfNotInTelAviv() {
        LatLng jerusalem = new LatLng(31.7683, 35.2137);
        Assertions.assertFalse(RoutePlannerService.isInTelAviv(jerusalem));
    }

    @Test
    public void isInTelAviv_isTrueIfInTelAviv() {
        LatLng telAviv = new LatLng(32.0853, 34.7818);
        Assertions.assertTrue(RoutePlannerService.isInTelAviv(telAviv));
    }

    @Test
    public void findBestMatch_ReturnsClosestMatchWithin150Meters() throws Exception {
        // Arrange
        LatLng inputLocation = new LatLng(32.0853, 34.7818);
        LatLng closeLocation = new LatLng(32.0854, 34.7819);
        LatLng farLocation = new LatLng(32.0853, 34.7918);

        Map<String, LatLng> mockParkingLots = new HashMap<>();
        mockParkingLots.put("Close Parking Lot", closeLocation);
        mockParkingLots.put("Far Parking Lot", farLocation);

        Field field = RoutePlannerService.class.getDeclaredField("allParkingLotsLocations");
        field.setAccessible(true);
        Map<String, LatLng> allParkingLotsLocations = (Map<String, LatLng>) field.get(null);
        allParkingLotsLocations.clear();
        allParkingLotsLocations.putAll(mockParkingLots);

        // Act
        String result = RoutePlannerService.findBestMatch(inputLocation);

        // Assert
        assertEquals("Close Parking Lot", result);
    }

    @Test
    public void distance_CalculatesCorrectDistance() {
        // Arrange
        LatLng location1 = new LatLng(32.0853, 34.7818);
        LatLng location2 = new LatLng(32.0854, 34.7819);

        // Act
        double result = RoutePlannerService.distance(location1, location2);

        // Assert
        assertEquals(14.0, result, 1.0);
    }

}